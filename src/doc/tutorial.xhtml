<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html [
  <!ENTITY  enter  "↵">
  <!ENTITY  tab    "TAB">
  <!ENTITY  esc    "ESC">
  <!ENTITY  ctrl   "CRTL+">
  <!ENTITY  alt    "ALT+">
  <!ENTITY  space  "␣">
]>

<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:internal="http://www.andonyar.com/rec/2008-12/gemse/internalns"
    xmlns:m="http://www.w3.org/1998/Math/MathML"
    xml:lang="en"
    internal:function="documentation"
>

<head>
    <title>Gemse Tutorial</title>
    <link rel="stylesheet" href="../gemse.css" type="text/css" />
</head>

<body>

<h1>Gemse Tutorial</h1>

<p><em>I would be happy to hear from you if you have problems, so I can
improve this tutorial.</em></p>

<p>Gemse is inspired by the texteditor 
<a href="http://www.vim.org/">Vim</a>. It is difficult to learn, but
hopefully will be a powerful tool once it is finished. However, I am
sure you will master it, if you want to.</p>

<p>You won't need any knowledge about vim for this tutorial. But you
will need knowledge about Presentation MathML.
How you can edit Content MathML and OpenMath is discussed as well in this tutorial,
but you may skip the corresponding sections if your are unfamiliar with
them. Gemse's documentation
contains a short <a href="introPMathML.xhtml">introduction to
presentation MathML</a>. Additionally, you can find tutorials
and the specification of MathML on the 
<a href="http://www.w3.org/Math/">MathML page of the w3c</a>. 
Information on OpenMath can be found on the
<a href="http://www.openmath.org/">OpenMath website</a>.
Of course learning
presentation MathML requires learning the fundamentals of XML. Gemse
directly edits the XML structure of presentation MathML.</p>

<h2 id="toc">Table of Contents</h2>

<ul>
<li><a href="#intro">Introduction</a></li>
<li><a href="#moving">Moving around</a></li>
<li><a href="#deleting">Deleting</a></li>
<li><a href="#undo">Undo and redo</a></li>
<li><a href="#inserting">Inserting</a></li>
<li><a href="#saving">Saving your work</a></li>
<li><a href="#more_insertmode">More fun with the insert mode</a></li>
<li><a href="#visual">The visual mode</a></li>
<li><a href="#copypaste">Copying and Pasting</a></li>
<li><a href="#attributemode">The attribute mode</a></li>
<li><a href="#views">Views and Viewsets</a></li>
<li><a href="#settings">Set your settings</a></li>
<li><a href="#contentmathml">Working with Content MathML</a></li>
<li><a href="#openmath">Working with OpenMath</a></li>
<li><a href="#notations">Using Notations</a></li>
<li><a href="#editnotations">Editing Notations</a></li>
<li><a href="#svg">Working with SVG</a></li>
<li><a href="#customizing">Customizing</a></li>
<li><a href="#how_to_go_on">How to go on?</a></li>
</ul>

<h2 id="intro">Introduction</h2>

<p>Gemse 1 is an application written in Javascript using Mozilla. So,
if you have installed Firefox, you are already lucky. If you do not
like the idea of installing Firefox, you can use XULRunner.
Please refer to the <a href="base.xhtml">base documentation</a>
to find out how to install and run Gemse.</p>

<p>There is an input box at the very bottom. The cursor should be placed there
automatically. If not, do that manually, for example by clicking in
the box. Now you can start typing commands. As soon as you have
entered a complete command, it will be executed and the box will be
cleared. If you have typed something wrong, you can clear the box manually
by hitting the escape key.</p>

<p>Let's try it: Enter <kbd>:help&enter;</kbd> (&enter; means that you
have to hit the enter key.) This opens the index of Gemse's help
sites in a new window or a new tab. Close it to get back to the
editor. Observe that the input box is empty at this point. If you
have made a typo, hit <kbd>&esc;</kbd> (that is, hit the escape key.)
to clear the input box and try again.</p>

<p>There are a couple of example equations included in the documentation of Gemse.
We will use some of them. You will now learn how to load them.</p>

<p>Basically loading works like this: You enter <kbd>:load</kbd> followed
by a space and the URI of the file you want to load. Finally, you hit
enter. Yes, you have to enter the URI. This allows you to load any
file from the web you can access. Of course, files on your computer
can be loaded like that too. Their URIs begin with
<code>file://</code>. So, for example, in order to load the file
<code>/home/john/foo.xml</code> you have to use the URI
<code>file:///home/john/foo.xml</code> and in this case, the command is
<kbd>:load file:///home/john/foo.xml&enter;</kbd>. You can also use
a relative URI.</p>

<p>In this tutorial, when I tell you to load a file
<code>examples/foo.xml</code>, you have to do that like this: If you use
Gemse as Firefox extension or as XULRunner application, type
<kbd>:load chrome://gemse/content/doc/examples/foo.xml&enter;</kbd>.
If you use the demo on the web or if you opened
<code>editor.xul</code> in your browser not using a
<code>chrome://</code> URI, try
<kbd>:load doc/examples/foo.xml&enter;</kbd>.
Alternatively, you can just enter <kbd>:example foo.xml&enter;</kbd>.</p>

<p>Try it: Load the file <code>examples/pres01.xml</code>.
You should see something like shown below.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><hbox><vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="editcursor">
<mrow>
    <mrow>
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="editcursor">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">)</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div><hbox><html:div internal:function="viewport" internal:viewClass="SourceView"><html:pre><html:span internal:selected="editcursor">&lt;math&gt;
<html:span>  &lt;mrow&gt;
<html:span>    &lt;mrow&gt;
<html:span>      &lt;mi&gt;exp&lt;/mi&gt;
</html:span><html:span>      &lt;mo&gt;(&lt;/mo&gt;
</html:span><html:span>      &lt;mi&gt;x&lt;/mi&gt;
</html:span><html:span>      &lt;mo&gt;)&lt;/mo&gt;
</html:span>    &lt;/mrow&gt;
</html:span><html:span>    &lt;mo&gt;=&lt;/mo&gt;
</html:span><html:span>    &lt;mrow&gt;
<html:span>      &lt;munderover&gt;
<html:span>        &lt;mo&gt;∑&lt;/mo&gt;
</html:span><html:span>        &lt;mrow&gt;
<html:span>          &lt;mi&gt;k&lt;/mi&gt;
</html:span><html:span>          &lt;mo&gt;=&lt;/mo&gt;
</html:span><html:span>          &lt;mi&gt;0&lt;/mi&gt;
</html:span>        &lt;/mrow&gt;
</html:span><html:span>        &lt;mi&gt;∞&lt;/mi&gt;
</html:span>      &lt;/munderover&gt;
</html:span><html:span>      &lt;mfrac&gt;
<html:span>        &lt;msup&gt;
<html:span>          &lt;mi&gt;x&lt;/mi&gt;
</html:span><html:span>          &lt;mi&gt;k&lt;/mi&gt;
</html:span>        &lt;/msup&gt;
</html:span><html:span>        &lt;mrow&gt;
<html:span>          &lt;mi&gt;k&lt;/mi&gt;
</html:span><html:span>          &lt;mo&gt;!&lt;/mo&gt;
</html:span>        &lt;/mrow&gt;
</html:span>      &lt;/mfrac&gt;
</html:span>    &lt;/mrow&gt;
</html:span>  &lt;/mrow&gt;
</html:span>&lt;/math&gt;
</html:span></html:pre></html:div><html:div internal:function="viewport" internal:viewClass="AttributeView"><html:table><html:caption>attributes</html:caption><html:tr><html:td></html:td><html:td>display</html:td><html:td>block</html:td></html:tr><html:tr><html:td>http://www.w3.org/2000/xmlns/</html:td><html:td>xmlns</html:td><html:td>http://www.w3.org/1998/Math/MathML</html:td></html:tr></html:table></html:div><html:div internal:function="viewport" internal:viewClass="DictionaryView"/></hbox></vbox><vbox internal:function="viewport" internal:viewClass="OthersView"><html:div><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
            <mi>n</mi>
        </munderover>
        <msub><mi>a</mi><mi>i</mi></msub>
    </mrow>
    <mo>+</mo>
    <mroot>
        <mrow>
            <msup>
                <mi>x</mi>
                <mn>2</mn>
            </msup>
            <mo>+</mo>
            <mi>b</mi>
        </mrow>
        <mi>3</mi>
    </mroot>
    <mo>+</mo>
    <mfenced open="&lt;" close="&gt;" separators=",">
        <mi>a</mi>
        <mi>b</mi>
    </mfenced>
</mrow> 
</math></html:div><html:div internal:selected="editcursor"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div></vbox></hbox><spacer flex="1"/><hbox internal:function="viewport" internal:viewClass="StatusbarView"><html:div>edit</html:div></hbox></vbox>
</vbox>
</div>

<p>The topmost box contains the rendering of the current equation,
whereas the second box from the top shows the MathML tree structure of it.
Below the second box, you can see the (a little bit simplified) source 
of the equation and a table of attributes of the selected element.
On the righthand side, you can see a list of all equations that you
currently have opened. At the bottom, there is a status line which informs
you about the editor's current state. In the following
sections you will learn what all this means.</p>

<p>From now on, I will show you only those boxes that I think are
important. Actually, these boxes are called views as you will learn in
a later section of this tutorial.</p>

<h2 id="moving">Moving around</h2>

<p>The most important thing is the cursor. It highlights an element of
the equation. If you issue a command, it gets applied on the
highlighted element. Currently, the cursor is at the <code>math</code>
element, the topmost element of the equation.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="editcursor">
<mrow>
    <mrow>
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="editcursor">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">)</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p> You can move the cursor
around using the keys <kbd>h</kbd>, <kbd>j</kbd>, <kbd>k</kbd>,
<kbd>l</kbd>. (Well, I am actually writing what you have to enter. So
<kbd>J</kbd> means that you have to press the shift key and the key
with the letter J on it. When I write <kbd>j</kbd> you have to press
the key with the J on it, which enters a lower case j.) <kbd>h</kbd>
moves the cursor to the left, <kbd>l</kbd> moves it to the right. Of
course, the math element does not have an element to the right nor one
to the left. It has no siblings, if you want to express it in XML
terms. <kbd>k</kbd> moves the cursor to the parent of the currently
highlighted element. However, the <code>math</code> element is the
topmost element. Now press <kbd>j</kbd>.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
<mrow internal:selected="editcursor">
    <mrow>
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="parent">math<html:div class="element" internal:selected="editcursor">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">)</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>The cursor has been moved, but it is difficult to see where exactly. 
In order to see exactly which element the cursor is on now,
look at the tree view in the box below the equation. Press
<kbd>j</kbd> again.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow internal:selected="parent">
    <mrow internal:selected="editcursor">
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element" internal:selected="parent">mrow<html:div class="element" internal:selected="editcursor">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">)</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p><kbd>j</kbd> moves the cursor to the first child element. Now you
can press <kbd>l</kbd> to move the cursor to the next sibling. Now the
<code>mo</code> element with the <code>=</code> in it is higlighted.
<kbd>h</kbd> moves the cursor to the previous sibling, usually the
element to the left. Now use these command several times to get used
to it.</p>

<p>Observe that <kbd>h</kbd>, <kbd>l</kbd> do not always mean <q>to
the right</q> or <q>to the left</q> respectively. For example, select
the <code>mfrac</code> element. You can reach it by putting the cursor
over the <code>math</code> element by using <kbd>k</kbd> several times
followed by <kbd>jjlljl</kbd>. (Note that I sometimes join commands
that you have to enter one after the other. This for example means that you have
to hit <kbd>j</kbd>, then <kbd>j</kbd>, then <kbd>l</kbd> and so on.)
Now hit <kbd>j</kbd> once again. This selects the first child of the
<code>mfrac</code> element.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac internal:selected="parent">
            <msup internal:selected="editcursor"><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">)</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element" internal:selected="parent">mfrac<html:div class="element" internal:selected="editcursor">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>In MathML, the first child of an <code>mfrac</code> element is the
enumerator of the fraction. The second one is its denominator. So
enumerator and denominator are siblings in the XML tree. That means
that you have to use <kbd>h</kbd> and <kbd>l</kbd> to switch between
the two. <kbd>j</kbd> and <kbd>k</kbd> do have a different meaning in
this context: <kbd>k</kbd> moves to the parent, i.e. the
<code>mfrac</code> element. <kbd>j</kbd> moves to the first element
contained in the enumerator or denominator respectively. Try it. Also
try to find out what happens on the <code>msup</code> and
<code>munderover</code> elements.</p>

<p>Now you know how to move around. You also have seen that movements
are relative to the XML tree structure, not relative to where
something appears in the rendered equation. There are and will be many
more commands to move around faster, but what you have seen should
suffice for now.</p>

<h2 id="deleting">Deleting</h2>

<p>We start with the easy thing. Its deleting. (Who would have thought
that it is something destructive?) If you hit <kbd>x</kbd> the
element that is highlighted by the cursor gets removed, including all
its descendants. Move the cursor to the <code>(</code> after the
<code>exp</code> and hit <kbd>x</kbd>. What you get is</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow internal:selected="parent">
        <mi>exp</mi>
        
        <mi internal:selected="editcursor">x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element" internal:selected="parent">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element" internal:selected="editcursor">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">)</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Do the same with the closing bracket <code>)</code> by
<kbd>lx</kbd>. Now you have</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow internal:selected="parent">
        <mi>exp</mi>
        
        <mi internal:selected="editcursor">x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element" internal:selected="parent">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element" internal:selected="editcursor">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Beware: <kbd>x</kbd> can be dangerous:
Select the denominator of the fraction. Now hit <kbd>x</kbd> to delete it. You
immediately see that this was not good.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac internal:selected="parent">
            <msup internal:selected="editcursor"><mi>x</mi><mi>k</mi></msup>
            
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element" internal:selected="parent">mfrac<html:div class="element" internal:selected="editcursor">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>What does cause this? Well, some MathML elements must have a fixed
number of children, in case of <code>mfrac</code> this number is two.
If an <code>mfrac</code> element does not have two children, it is
invalid. The MathML renderer no longer understands what is meant by
the <code>mfrac</code> element and can not render the equation
completely. If something like this happens, you have to look at the
tree view in order to fix the problem, since the rendering of the
equation is incomplete. You can also fix it by undoing your mistake,
as you will learn in the next section.</p>

<h2 id="undo">Undo and redo</h2>

<p>Of course, Gemse has also undo and redo commands. <kbd>u</kbd>
undoes your last change. <kbd>&ctrl;r</kbd> undoes your last undo.
(<kbd>&ctrl;r</kbd> means that you have to hold down the control key
and hit r. Something like <kbd>&ctrl;ab&alt;c</kbd> says that you have to
hold control, hit a, releae control, hit b, hold down alt, hit c and
releaste alt.) Now hit <kbd>u</kbd>. The denominator you just deleted
is back.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac internal:selected="parent">
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow internal:selected="editcursor"><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element" internal:selected="parent">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element" internal:selected="editcursor">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>You can not only undo the last change, you can even undo changes
before it. For this hit <kbd>uu</kbd>. Now the two brackets you
deleted are back too.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow internal:selected="parent">
        <mi>exp</mi>
        <mo internal:selected="editcursor">(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element" internal:selected="parent">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element" internal:selected="editcursor">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">)</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>If you have undone too many changes, you can reapply them by
hitting <kbd>&ctrl;r</kbd>. Now, do that twice. The brackets are gone
again.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow internal:selected="parent">
        <mi>exp</mi>
        
        <mi internal:selected="editcursor">x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element" internal:selected="parent">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element" internal:selected="editcursor">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Of course, you can undo again what you have redone, and so on.</p>

<p>Vim provides history information in form of a whole history tree.
Gemse only stores changes in a linear fashion. In vim, if you make
changes after an undo, the undone change gets remembered. Gemse
forgets all undone changes if you make new changes.</p>

<h2 id="inserting">Inserting</h2>

<p>Being destructive is fun, but being constructive is even more
fun.</p>

<p>Well, to insert something, you have to switch from the edit mode to
the insert mode. This can be done with various commands, depending
where you want to insert something. <kbd>a</kbd> (think: append)
calls the insert mode such that it inserts new elements behind the
current cursor. If you want to insert before it, you have to use
<kbd>i</kbd>. The insert mode also has a cursor quite like the edit
mode, but it looks different. Well, it doesn't only look different, it
has a further very important difference: It lies between two elements,
not on an element.</p>

<p>It is important to know that the insert mode of gemse is not yet final and
will probably change in the future. Even more, different insert
modes can coexist. At the moment, there are two insert modes, the UCD
insert mode and the trivial insert mode. While in edit mode, you can
switch the insert mode to be used by hitting <kbd>&tab;</kbd>
(the tabulator key). In this
tutorial we will use the UCD insert mode, which is the default.
If you want, you can also take a look at the documentation of the
trivial insert mode. This mode is called like that because it was
trivial to implement, not because it is trivial to use it. Though it
is tricky to use it, it is easy to grasp how it works.</p>

<p>But let us concentrate on the UCD insert mode:
Position the cursor over the <code>munderover</code> element of the
sum sign, like this:</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="parent">
        <munderover internal:selected="editcursor">
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="parent">mrow<html:div class="element" internal:selected="editcursor">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Now hit <kbd>i</kbd>. Do you see the cursor? It is right in front
of the sum sign, or more precicely, in front of the
<code>munderover</code> element.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="insertCursorIn">
        <munderover internal:selected="insertCursorBefore">
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="insertCursorIn">mrow<html:div class="element" internal:selected="insertCursorBefore">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">∞</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>However, for the moment we let it be. Press <kbd>&esc;</kbd>.
(Well, here you have to hit the escape key, not E then S then C.) 
This puts you right back into the edit mode.</p>

<!-- Idea: change the infinite sum into a limes of partial sums. -->

<p>What is an infinite sum? Well, it is the limes of partial sums.
Now, let us write it as such. First, let us change the
<m:math><m:mi>∞</m:mi></m:math> to <m:math><m:mi>n</m:mi></m:math>. Hit
<kbd>jll</kbd>. Press <kbd>x</kbd> to remove the infinity sign, then
press <kbd>a</kbd> to open the insert mode. Remember that now, the
munderover is not valid, it has not enough children, but we will
immmediately add one.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover internal:selected="insertCursorIn">
            <mo>∑</mo>
            <mrow internal:selected="insertCursorAfter"><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element" internal:selected="insertCursorIn">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element" internal:selected="insertCursorAfter">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Press <kbd>n</kbd>. The insert mode recognizes <code>n</code> as a
letter and inserts it as an identifier into the equation. Now close the
insert mode with <kbd>&esc;</kbd>.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover internal:selected="parent">
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi internal:selected="editcursor">n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element" internal:selected="parent">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element" internal:selected="editcursor">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Now press <kbd>k</kbd> in order to put the cursor on the
<code>munderover</code> element. Now we are going to insert the
limes. Press <kbd>i</kbd>.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="insertCursorIn">
        <munderover internal:selected="insertCursorBefore">
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="insertCursorIn">mrow<html:div class="element" internal:selected="insertCursorBefore">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Well, the current implementations of the insert modes are sometimes
cumbersome. The
main problem (of both insert modes) is that if you want to write
<m:math><m:msup><m:mi>a</m:mi><m:mn>2</m:mn></m:msup></m:math>, you have to tell it,
that you want to put the 2 into superposition before you enter the
a. But if you write down a formula on paper, you first think of the a.
(Well, the insert mode has a solution to this problem. You will see
that in a later section in this tutorial.)
</p> 

<p>We want to insert an operator <m:math><m:mo>lim</m:mo></m:math> 
and under it we want to have the identifier 
<m:math><m:mi>n</m:mi></m:math>, the operator 
<m:math><m:mo>→</m:mo></m:math> and the identifier
<m:math><m:mi>∞</m:mi></m:math>.</p>

<p>If you make a mistake in the insert mode, you can hit
<kbd>&esc;</kbd> (maybe twice) to leave the insert mode and then use
<kbd>u</kbd> and try again.</p>

<p>To do that we need an <code>munder</code> element. Press
<kbd>&ctrl;u</kbd> to tell the insert mode that you want to have such an
element.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munder internal:selected="insertCursorIn"><mi internal:missing="1" internal:selected="insertCursorBefore">□</mi><mi internal:missing="1">□</mi></munder><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element" internal:selected="insertCursorIn">munder<html:div class="element" internal:selected="insertCursorBefore">mi<html:div class="nodeValue">□</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">□</html:div></html:div></html:div><html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>You can see it already. When you now continue to insert elements,
they will replace the boxes you can see. Now press <kbd>&ctrl;o</kbd>. This
says that you are going to insert an operator. Now insert
<kbd>lim&enter;</kbd>. We can not insert <kbd>lim</kbd> directly
without indicating explicitely that we enter an operator using
<kbd>&ctrl;o</kbd>, because if we did, the insert mode would think
that we want the identifier <code>l</code> followed by the identifier
<code>i</code> followed by <code>m</code>.</p>

<p>Actually, whenever we need an identifier or an operator which is
longer than one character or which is treated by the insert mode the
wrong way, we have to first hit <kbd>&ctrl;o</kbd> for an operator or
<kbd>&ctrl;i</kbd> for an identifier, then we have to enter the
characters and finally terminate with <kbd>&enter;</kbd>. Similarly,
for numbers you can use <kbd>&ctrl;n</kbd>, but normally you do not
need to do that, since the UCD insert mode is more clever when it
comes to numbers.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munder internal:selected="insertCursorIn"><mo internal:selected="insertCursorAfter">lim</mo><mi internal:missing="1" internal:selected="insertCursorBefore">□</mi></munder><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element" internal:selected="insertCursorIn">munder<html:div class="element" internal:selected="insertCursorAfter">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element" internal:selected="insertCursorBefore">mi<html:div class="nodeValue">□</html:div></html:div></html:div><html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Good. Since what we want to write below the limes consists of
multiple elements, we have to insert an <code>mrow</code> element. Do
that by hitting <kbd>&space;</kbd> (denoting the space bar).</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munder><mo>lim</mo><mrow internal:selected="insertCursorIn"><mi internal:missing="1" internal:selected="insertCursorBefore">□</mi></mrow></munder><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element" internal:selected="insertCursorIn">mrow<html:div class="element" internal:selected="insertCursorBefore">mi<html:div class="nodeValue">□</html:div></html:div></html:div></html:div><html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Now press <kbd>n</kbd>. It is put as an identifier into the
<code>mrow</code> element. Hit <kbd>→</kbd> to get the arrow operator
and finally <kbd>∞</kbd> for the infinity sign.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munder internal:selected="parent"><mo>lim</mo><mrow internal:selected="insertCursorIn"><mi>n</mi><mo>→</mo><mi internal:selected="insertCursorAfter">∞</mi></mrow></munder><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element" internal:selected="parent">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element" internal:selected="insertCursorIn">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element" internal:selected="insertCursorAfter">mi<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Now hit <kbd>&esc;</kbd> and we are done.</p>

<h2 id="saving">Saving your work</h2>

<p>I think we have done enough to get a break. You do not need to save
the equation for this tutorial, since later, you can just load the
equation as it is now from a file included in the documentation. But
anyway, I want to tell you here how to save an equation to a file.</p>

<p><em>Important:</em> Gemse will overwrite existing files without
moaning. (The author has still not yet taken care of a proper
implementation.)
If you give the save or load commands a relative URI, then it is
considered to be relative to the current working directory, as
indicated by firefox. Also be aware, that if you are using gemse
not as Firefox extension or XULRunner application,
it has no permission to write to your harddisk.</p>

<p>For saving you simply write <kbd>:save&space;</kbd>, followed by the
URI where you want to save your equation, followed by
<kbd>&enter;</kbd>. The URI may be a relative one, which then is
interpreted as reltive to the current working directory. If the
URI points to a remote resource on a HTTP server, Gemse tries to save
the file using the PUT method. However, if the URI points to a local
file, Gemse will use the filesystem to save it.</p>

<p>So you can write <kbd>:save example.xml&enter;</kbd> to save the equation
as an XML file in your current working directory. Or use something like
<kbd>:save file:///home/urs/math/example.xml&enter;</kbd> to give an
absolute path. Depending on your operating system, this looks a little
bit different.</p>

<p>If you have loaded the equation from a file, Gemse remembers that.
In such a case you can use <kbd>:save&enter;</kbd> to write it back
into this file.</p>

<p>Alternatively, instead of saving to a file, you can also use the
command <kbd>:serialize&enter;</kbd> which displays the XML source
code on the screen.</p>

<h2 id="more_insertmode">More fun with the insert mode</h2>

<p>Let us construct the following formula:</p>

<math xmlns="http://www.w3.org/1998/Math/MathML" display="block"> <mrow><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo>=</mo><msqrt><msup><mrow><mo>(</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo>)</mo></mrow><mn>2</mn></msup></msqrt><mo>=</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow></mrow></math>

<p>Nothing easier than that. First, create a new equation with
<kbd>:new&enter;</kbd>. Your other equation is still here, with
<kbd>:previous&enter;</kbd> and <kbd>:next&enter;</kbd> you can switch
between the two. (And <kbd>:close&enter;</kbd> or
<kbd>:close!&enter;</kbd> gets rid of one.) Here, I show you only the new one.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="editcursor">
<mrow/> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="editcursor">math<html:div class="element">mrow</html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>The newly created equation is a <code>math</code> element
containing an <code>mrow</code> element. Move the cursor to the <code>mrow</code> element.
Unfortunately, we can not use <kbd>i</kbd> nor <kbd>a</kbd>, since
they would insert before or after the <code>mrow</code> element. We want to insert
<em>in</em> the <code>mrow</code>. To do this, there is the command
<kbd>&ctrl;i</kbd>, which you now perform.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
<mrow internal:selected="insertCursorIn"/> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="parent">math<html:div class="element" internal:selected="insertCursorIn">mrow</html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Press <kbd>&ctrl;r</kbd>. This creates a squareroot. (<kbd>&ctrl;R</kbd> would
give you a general root.) Now type <kbd>^a2&enter;</kbd>.
Then <kbd>+&space;</kbd>. Here, the spacebar
creates an <code>mrow</code> element. Go on with
<kbd>2ab&enter;</kbd>, <kbd>+^b2&enter;&enter;</kbd>,
<kbd>=</kbd>.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
<mrow internal:selected="insertCursorIn"><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo internal:selected="insertCursorAfter">=</mo></mrow> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="parent">math<html:div class="element" internal:selected="insertCursorIn">mrow<html:div class="element">msqrt<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mrow<html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div></html:div><html:div class="element" internal:selected="insertCursorAfter">mo<html:div class="nodeValue">=</html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>And now <kbd>&ctrl;r(&space;a+b&enter;)</kbd>.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
<mrow><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo>=</mo><msqrt internal:selected="insertCursorIn"><mo>(</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo internal:selected="insertCursorAfter">)</mo></msqrt></mrow> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="parent">math<html:div class="element">mrow<html:div class="element">msqrt<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mrow<html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="insertCursorIn">msqrt<html:div class="element">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element" internal:selected="insertCursorAfter">mo<html:div class="nodeValue">)</html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p> Rats! We have
forgotten something important. The expression inside the brackets
including the brackets actually should be the base of a power.
Actually, we should have hit <kbd>^&space;</kbd> right before the
<kbd>(</kbd>. This mistake happens regularly (at least to me).
Usually, one thinks of the power after having written the base.
Unfortunately, the current insert mode does not work like that, it
needs you to enter the <kbd>^</kbd> before writing the base. However,
there is a feature that allows you to fix this situation. Find out
yourself what the commands <kbd>&ctrl;h</kbd> and <kbd>&ctrl;l</kbd> do. Well,
they select what you already wrote. Good. use these two commands to
select the brackets and their content:</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
<mrow><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo>=</mo><msqrt internal:selected="insertCursorIn"><mo internal:selected="userSelection">(</mo><mrow internal:selected="userSelection"><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo internal:selected="userSelection">)</mo></msqrt></mrow> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="parent">math<html:div class="element">mrow<html:div class="element">msqrt<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mrow<html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="insertCursorIn">msqrt<html:div class="element" internal:selected="userSelection">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element" internal:selected="userSelection">mrow<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element" internal:selected="userSelection">mo<html:div class="nodeValue">)</html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Now, hit <kbd>^</kbd>. The selected elements are enclosed inside an
<code>mrow</code> which becomes the first element of the new
<code>msup</code> element.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
<mrow><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo>=</mo><msqrt><msup internal:selected="insertCursorIn"><mrow internal:selected="insertCursorAfter"><mo>(</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo>)</mo></mrow><mi internal:missing="1" internal:selected="insertCursorBefore">□</mi></msup></msqrt></mrow> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="parent">math<html:div class="element">mrow<html:div class="element">msqrt<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mrow<html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">msqrt<html:div class="element" internal:selected="insertCursorIn">msup<html:div class="element" internal:selected="insertCursorAfter">mrow<html:div class="element">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">)</html:div></html:div></html:div><html:div class="element" internal:selected="insertCursorBefore">mi<html:div class="nodeValue">□</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Now, we put the exponent <kbd>2</kbd> and continue with our
work: <kbd>&enter;&enter;=</kbd>.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
<mrow internal:selected="insertCursorIn"><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo>=</mo><msqrt><msup><mrow><mo>(</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo>)</mo></mrow><mn>2</mn></msup></msqrt><mo internal:selected="insertCursorAfter">=</mo></mrow> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="parent">math<html:div class="element" internal:selected="insertCursorIn">mrow<html:div class="element">msqrt<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mrow<html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">msqrt<html:div class="element">msup<html:div class="element">mrow<html:div class="element">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">)</html:div></html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div></html:div><html:div class="element" internal:selected="insertCursorAfter">mo<html:div class="nodeValue">=</html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>To finish the whole thing, press <kbd>&space;(&space;a+b&enter;)&enter;&enter;</kbd>.
Actually, the last hit of the enter key terminates the insert mode,
you also could have used <kbd>&esc;</kbd> instead.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
<mrow internal:selected="parent"><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo>=</mo><msqrt><msup><mrow><mo>(</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo>)</mo></mrow><mn>2</mn></msup></msqrt><mo>=</mo><mrow internal:selected="editcursor"><mo>(</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo>)</mo></mrow></mrow> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="parent">math<html:div class="element" internal:selected="parent">mrow<html:div class="element">msqrt<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mrow<html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">msqrt<html:div class="element">msup<html:div class="element">mrow<html:div class="element">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">)</html:div></html:div></html:div><html:div class="element">mn<html:div class="nodeValue">2</html:div></html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="editcursor">mrow<html:div class="element">mo<html:div class="nodeValue">(</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">a</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">+</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">b</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">)</html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Done. Note that at certain places, we could have skipped the
insertion of an <code>mrow</code>. As you will see in the next section, such
optional mrows can be added easily later on in the edit mode.</p>

<p>You can now close this equation. Since you do not have saved your
changes, <kbd>:close&enter;</kbd> will not work. Instead, use
<kbd>:close!&enter;</kbd>, which will throw away all unsaved
changes.</p>

<h2 id="visual">The visual mode</h2>

<p>In this section we are going to use the equation from the file
<code>examples/pres01a.xml</code>. If you started from the beginning of
this tutorial, this is what you should have now. If this is not the
case, simply load it as described in the introduction to this
tutorial.</p>

<p>Sometimes you want to do something not only with the element the
cursor is on, but with a whole sequence of elements. Using the visual
mode (name inspired by vim), you can select a set of siblings.</p>

<p>Put the cursor on the <code>munderover</code> element of the sum
sign. We are going to put the <code>munderover</code> element and the
following <code>mfrac</code> element into an <code>mrow</code> element. This makes
sense, since they together form the argument of the <code>lim</code> operator.</p>

<p>Press <kbd>v</kbd>. This throws you directly into visual mode.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="parent">
        <munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><munderover internal:selected="userSelectionCursor">
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="parent">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element" internal:selected="userSelectionCursor">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>If you use the default skin, you now see a beautiful blue. You can
now use <kbd>l</kbd>, <kbd>h</kbd> and <kbd>o</kbd>. Find out yourself
what they do. Be careful not to hit any other key. Now select the sum
and the fraction.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="parent">
        <munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><munderover internal:selected="userSelection">
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac internal:selected="userSelectionCursor">
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="parent">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element" internal:selected="userSelection">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element" internal:selected="userSelectionCursor">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Now you can hit a command from the editMode. In this case, execute
the command <kbd>&space;</kbd> (i.e. hit the space bar). This
command puts an <code>mrow</code> element around the selected
elements.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="parent">
        <munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder>
        <mrow internal:selected="editcursor"><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover><mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac></mrow>
    </mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="parent">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element" internal:selected="editcursor">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>You are back in the edit mode. In the tree view you can see the
new <code>mrow</code> element. The cursor is currently on it.</p>

<h2 id="copypaste">Copying and Pasting</h2>

<p>Since you now know how the visual mode works, copying is no more
difficult. Gemse uses the command <kbd>y</kbd> for copying the
selected elements into a register. A register is
simply a place where copied elements are stored. If you use a command
that works on a register and you do not say on which one, it will use
the default register (which is called <code>"</code>).</p>

<p>Delete commands put the removed nodes into a register. Let us try
that. Move the cursor to the left side of the equation.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow internal:selected="parent">
    <mrow internal:selected="editcursor">
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow></mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element" internal:selected="parent">mrow<html:div class="element" internal:selected="editcursor">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Hit <kbd>x</kbd> to remove it and move the cursor to the right side
of the equation.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow internal:selected="parent">
    
    <mo>=</mo>
    <mrow internal:selected="editcursor"><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow></mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element" internal:selected="parent">mrow<html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="editcursor">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Hit <kbd>p</kbd>. This command pastes the content of a register
after the cursor.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow internal:selected="parent">
    
    <mo>=</mo>
    <mrow><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow></mrow>
<mrow internal:selected="editcursor">
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow></mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element" internal:selected="parent">mrow<html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div><html:div class="element" internal:selected="editcursor">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Move the cursor to the equal sign and hit <kbd>xp</kbd> again.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow internal:selected="parent">
    
    
    <mrow><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow></mrow>
<mo internal:selected="editcursor">=</mo><mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow></mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element" internal:selected="parent">mrow<html:div class="element">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div><html:div class="element" internal:selected="editcursor">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>You can use <kbd>xp</kbd> to interchange the numerator and
denominator: Put the cursor on the numerator.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    
    
    <mrow><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac internal:selected="parent">
            <msup internal:selected="editcursor"><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow></mrow>
<mo>=</mo><mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow></mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element" internal:selected="parent">mfrac<html:div class="element" internal:selected="editcursor">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Now hit <kbd>xp</kbd>.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    
    
    <mrow><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac internal:selected="parent">
            
            <mrow><mi>k</mi><mo>!</mo></mrow>
        <msup internal:selected="editcursor"><mi>x</mi><mi>k</mi></msup></mfrac>
    </mrow></mrow>
<mo>=</mo><mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow></mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element" internal:selected="parent">mfrac<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div><html:div class="element" internal:selected="editcursor">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div></html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>There is also the command <kbd>P</kbd> which puts the content of a
register before the cursor as opposed to after it. Sometimes one wants
to put something into an empty element. In such a case, <kbd>P</kbd>
and <kbd>p</kbd> do not help. Select all children of the topmost
<code>mrow</code> element (not the element itself, but its children).
You can do that for example by typing <kbd>ggjjv$</kbd>.
(<kbd>gg</kbd> moves the cursor to the <code>math</code> element.
<kbd>$</kbd> moves to the last sibling of the current element.)</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow internal:selected="parent">
    
    
    <mrow internal:selected="userSelection"><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            
            <mrow><mi>k</mi><mo>!</mo></mrow>
        <msup><mi>x</mi><mi>k</mi></msup></mfrac>
    </mrow></mrow>
<mo internal:selected="userSelection">=</mo><mrow internal:selected="userSelectionCursor">
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow></mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element" internal:selected="parent">mrow<html:div class="element" internal:selected="userSelection">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div><html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div></html:div></html:div></html:div><html:div class="element" internal:selected="userSelection">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="userSelectionCursor">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Now delete the selected stuff, that is, hit <kbd>d</kbd>. This
leaves you with an empty <code>mrow</code> element.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
<mrow internal:selected="editcursor">
    
    
    
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="parent">math<html:div class="element" internal:selected="editcursor">mrow</html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Press <kbd>&ctrl;p</kbd>. What we removed is back in.</p>

<p>Select the equal sign and the right hand side of the equation using
the visual mode (<kbd>v</kbd>).</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow internal:selected="parent">
    
    
    
<mrow><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            
            <mrow><mi>k</mi><mo>!</mo></mrow>
        <msup><mi>x</mi><mi>k</mi></msup></mfrac>
    </mrow></mrow><mo internal:selected="userSelection">=</mo><mrow internal:selected="userSelectionCursor">
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow></mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element" internal:selected="parent">mrow<html:div class="element">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div><html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div></html:div></html:div></html:div><html:div class="element" internal:selected="userSelection">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="userSelectionCursor">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Hit <kbd>y</kbd>. This copies the selected nodes into a register
without removing them. (This command is not named <kbd>c</kbd>, since
this letter is already used for the change command. You can think of
<kbd>y</kbd> as <q>yank</q>.) Move the cursor to the right and press
<kbd>p</kbd>.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow internal:selected="parent">
    
    
    
<mrow><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            
            <mrow><mi>k</mi><mo>!</mo></mrow>
        <msup><mi>x</mi><mi>k</mi></msup></mfrac>
    </mrow></mrow><mo>=</mo><mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow><mo>=</mo><mrow internal:selected="editcursor">
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow></mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element" internal:selected="parent">mrow<html:div class="element">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element">mfrac<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div><html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div></html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element" internal:selected="editcursor">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div></html:div></html:div></html:div></html:div></vbox>
</vbox>
</div>

<p>Be aware that delte, copy and even change commands all put the
respective elements into a register. By default, they use the default
register. This makes it sometimes tricky to use the default register.
You gan prepend <kbd>"x</kbd> to such a command or to a paste command
in order to use another register, where you have to write the name of
the register in the place of <code>x</code>.
Every register
has a name consisting of exactly one character. (Unlike in vim, you
can use every unicode character as name. This extends the amount of
available registers far beyond 26. Gemse's register names are case
sensitive, for example, register A and a are distinct registers.)</p> 

<p>Hit <kbd>u</kbd> once to undo the mess from above. Move the cursor
to the left hand of the equation and type <kbd>"ay</kbd>. Put the
cursor on the righthand side and hit <kbd>"by</kbd>. Now try
<kbd>"ap</kbd> and <kbd>"bp</kbd> and see what happens. Undo your
changes afterwards.</p>

<p>Note that the commands that put something into a register always
put the stuff in the default register as well when you tell them to
use another register. The main reason for this is that it is done like
that in Vim.</p>


<h2 id="attributemode">The attribute mode</h2>

<p>If you start here, load <code>examples/pres01a.xml</code>. It is
what you should have now if you went through the last section.</p>

<p>In MathML, one can put various attributes on elements. They control
their (semantically significant) appeareance. It is also possible to put
attributes of a foreign namespace on them. One useful example for this
are attributes from XLink, which allow you to make links out of MathML
elements.</p>

<p>In edit mode, you can call the attribute mode which allows you to
edit the attributes of this element. At the moment, the attribute mode
is called with <kbd>@</kbd>. This may change in the future, since in
vim, <kbd>@</kbd> has another meaning, which could be important for
gemse too.</p>

<p>Select the fraction, i.e. the <code>mfrac</code> element. Now hit
<kbd>@</kbd>. You are now in the attribute mode. The selected element
does not yet have any attributes declared. However, the attribute view
below the tree view does also show you the default values of all
attributes. If an attribute is not declared, MathML uses its default
value. Let us add the attribute <code>bevelled</code>. For this, write
<kbd>ibevelled&enter;true&enter;</kbd>. Note that the <code>i</code>
at the beginning tells the attribute mode that you want to insert a
new attribute. Behind the i you have to write the name of the
attribute, then hit enter followed by the value of the attribute and
then enter again. As you can see, the attribute has been added to the
list of attributes and indeed, the fraction changed its
appeareance.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow internal:selected="parent">
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac internal:selected="editcursor" internal:selectedAttributes="" internal:attributeCursor="bevelled" bevelled="true">
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow></mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element" internal:selected="parent">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element" internal:selected="editcursor">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div><hbox><html:div internal:function="viewport" internal:viewClass="AttributeView"><html:table><html:caption>attributes</html:caption><html:tr internal:selected="attributeCursor"><html:td></html:td><html:td>bevelled</html:td><html:td>true</html:td></html:tr></html:table><html:table class="defaultAttribute"><html:caption>default attributes</html:caption><html:tr><html:td></html:td><html:td>linethickness</html:td><html:td>1</html:td></html:tr><html:tr><html:td></html:td><html:td>numalign</html:td><html:td>center</html:td></html:tr><html:tr><html:td></html:td><html:td>denomalign</html:td><html:td>center</html:td></html:tr><html:tr><html:td></html:td><html:td>bevelled</html:td><html:td>false</html:td></html:tr></html:table></html:div><html:div internal:function="viewport" internal:viewClass="DictionaryView"/></hbox><hbox internal:function="viewport" internal:viewClass="StatusbarView"><html:div>attribute</html:div></hbox></vbox>
</vbox>
</div>

<p>Let us add another attribute:
<kbd>ilinethickness&enter;0&enter;</kbd>. And antother one:
<kbd>ifoo&enter;bar&enter;</kbd>.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow internal:selected="parent">
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac internal:attributeCursor="bevelled" bevelled="true" internal:selected="editcursor" internal:selectedAttributes="" linethickness="0" foo="bar">
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow></mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element" internal:selected="parent">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element" internal:selected="editcursor">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div><hbox><html:div internal:function="viewport" internal:viewClass="AttributeView"><html:table><html:caption>attributes</html:caption><html:tr internal:selected="attributeCursor"><html:td></html:td><html:td>bevelled</html:td><html:td>true</html:td></html:tr><html:tr><html:td></html:td><html:td>foo</html:td><html:td>bar</html:td></html:tr><html:tr><html:td></html:td><html:td>linethickness</html:td><html:td>0</html:td></html:tr></html:table><html:table class="defaultAttribute"><html:caption>default attributes</html:caption><html:tr><html:td></html:td><html:td>linethickness</html:td><html:td>1</html:td></html:tr><html:tr><html:td></html:td><html:td>numalign</html:td><html:td>center</html:td></html:tr><html:tr><html:td></html:td><html:td>denomalign</html:td><html:td>center</html:td></html:tr><html:tr><html:td></html:td><html:td>bevelled</html:td><html:td>false</html:td></html:tr></html:table></html:div><html:div internal:function="viewport" internal:viewClass="DictionaryView"/></hbox><hbox internal:function="viewport" internal:viewClass="StatusbarView"><html:div>attribute</html:div></hbox></vbox>
</vbox>
</div>

<p>By looking at the attributes table you can see that there 
is also a cursor in the attribute mode.
You can move it with <kbd>j</kbd> and <kbd>k</kbd>. Select the
<code>bevelled</code> attribute and insert <kbd>cfalse&enter;</kbd>.
This changes the value of the attribute under the cursor. You can also
remove an attribute by moving the cursor to it and hitting
<kbd>x</kbd>. Do that now with the <code>foo</code> attribute.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow><munder><mo>lim</mo><mrow><mi>n</mi><mo>→</mo><mo>∞</mo></mrow></munder><mrow internal:selected="parent">
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac internal:attributeCursor="linethickness" bevelled="false" internal:selected="editcursor" internal:selectedAttributes="" linethickness="0">
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow></mrow>
</mrow>
</math></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element">math<html:div class="element">mrow<html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">exp</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mrow<html:div class="element">munder<html:div class="element">mo<html:div class="nodeValue">lim</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">→</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">∞</html:div></html:div></html:div></html:div><html:div class="element" internal:selected="parent">mrow<html:div class="element">munderover<html:div class="element">mo<html:div class="nodeValue">∑</html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">=</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">0</html:div></html:div></html:div><html:div class="element">mi<html:div class="nodeValue">n</html:div></html:div></html:div><html:div class="element" internal:selected="editcursor">mfrac<html:div class="element">msup<html:div class="element">mi<html:div class="nodeValue">x</html:div></html:div><html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div></html:div><html:div class="element">mrow<html:div class="element">mi<html:div class="nodeValue">k</html:div></html:div><html:div class="element">mo<html:div class="nodeValue">!</html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div></html:div><hbox><html:div internal:function="viewport" internal:viewClass="AttributeView"><html:table><html:caption>attributes</html:caption><html:tr><html:td></html:td><html:td>bevelled</html:td><html:td>false</html:td></html:tr><html:tr internal:selected="attributeCursor"><html:td></html:td><html:td>linethickness</html:td><html:td>0</html:td></html:tr></html:table><html:table class="defaultAttribute"><html:caption>default attributes</html:caption><html:tr><html:td></html:td><html:td>linethickness</html:td><html:td>1</html:td></html:tr><html:tr><html:td></html:td><html:td>numalign</html:td><html:td>center</html:td></html:tr><html:tr><html:td></html:td><html:td>denomalign</html:td><html:td>center</html:td></html:tr><html:tr><html:td></html:td><html:td>bevelled</html:td><html:td>false</html:td></html:tr></html:table></html:div><html:div internal:function="viewport" internal:viewClass="DictionaryView"/></hbox><hbox internal:function="viewport" internal:viewClass="StatusbarView"><html:div>attribute</html:div></hbox></vbox>
</vbox>
</div>

<p>Don't forget to hit <kbd>&esc;</kbd> after you are done with the
attributes in order to get back to the edit mode.</p>

<h2 id="views">Views and Viewsets</h2>

<p>Gemse provides different ways to look at an equation: Its
rendering, its tree structure shown by using nested boxes, its XML source
and more. These are what is called views in Gemse. But the
concept of views goes even further. The list of attributes of the
selected element, the list of dictionary entries, the list of the
other opened equations and the status bar are views as well. (However,
the input box is not a view.) The arrangement of views in the window
is called a viewset.</p>

<p>There are some predefined viewsets. The command <kbd>:viewset</kbd>
lets you choose the viewset you want to use. Currently, you are using
viewset 0. Type <kbd>:viewset 1&enter;</kbd> and note the difference.
In oder to get a list of all available viewsets, enter
<kbd>:viewset&enter;</kbd>. 
As you can see, every viewset has a name. Indeed, you can
give the command <kbd>:viewset</kbd> also the name of a viewset
instead of its number.</p>

<p>You can create and modify viewsets using the viewset configuration
window. It can be opened with the command <kbd>:viewsetconf&enter;</kbd>.
It is the only part of Gemse that requires a mouse.</p>

<img src="viewsetconf1.png"/>

<p>At the top are edit boxes for the name and the description of the
view. Below is a preview of the arrangement of the views using boxes.
Note that the thick black boxes are views and the thin gray ones are
XUL boxes which are used for more complex arrangements. You can click
a box to make it active. The active box is marked red. Below the
preview is a list of attributes of the active view or XUL box. For a
XUL box, you may like to set the attributes <code>orientation</code>
and <code>flex</code>. For views, you also see their options. This
allows you to easily adjust the options of a specific view, while
using <kbd>:set</kbd> in edit mode only allows you the set options for
all views of the same kind. Use the context menu in the list of
attributes to add or remove attributes or options. To change a value
(namespace, name or value of an attribute, name or value of an
option), double click it. (After adding an attribute or an option, all
its fields are empty, so you may not see it, but it is there anyway,
at the end of the list. Double cklick in its fields to fill in the
values.) Below the list of
options is a drop-down button which allows you to insert views or XUL
boxes inside, in front of or behind the active box.</p>

<p>Note that changes to a viewset take effect immediately.
All equations using this viewset will be affected. Maybe you
want to safe the viewset under a different name first. The button at
the bottom causes all equations to use the viewset you are currently
editing.</p>

<p>We will make use of this feature in the section about 
<a href="#editnotations">editing notations</a>.</p>

<h2 id="settings">Set your settings</h2>

<p>Many aspects of the behaviour of Gemse can be configured (without messing around in
the source code). The command <code>:set</code> is used to set
options. Here you will see some options and their effect. We take
<code>examples/pres02.xml</code> for the equation. Again, the
screenshots here only show the relevant views.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow internal:selected="parent">
        <munderover internal:selected="editcursor">
            <mo>∑</mo>
            <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
            <mi>n</mi>
        </munderover>
        <msub><mi>a</mi><mi>i</mi></msub>
    </mrow>
    <mo>+</mo>
    <mroot>
        <mrow>
            <msup>
                <mi>x</mi>
                <mn>2</mn>
            </msup>
            <mo>+</mo>
            <mi>b</mi>
        </mrow>
        <mi>3</mi>
    </mroot>
    <mo>+</mo>
    <mfenced open="&lt;" close="&gt;" separators=",">
        <mi>a</mi>
        <mi>b</mi>
    </mfenced>
</mrow> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="SourceView"><html:pre><html:span class="element">&lt;math&gt;
<html:span class="element">    &lt;mrow&gt;
<html:span class="element" internal:selected="parent">        &lt;mrow&gt;
<html:span class="element" internal:selected="editcursor">            &lt;munderover&gt;
<html:span class="element">                &lt;mo&gt;∑&lt;/mo&gt;
</html:span><html:span class="element">                &lt;mrow&gt;
<html:span class="element">                    &lt;mi&gt;i&lt;/mi&gt;
</html:span><html:span class="element">                    &lt;mo&gt;=&lt;/mo&gt;
</html:span><html:span class="element">                    &lt;mn&gt;1&lt;/mn&gt;
</html:span>                &lt;/mrow&gt;
</html:span><html:span class="element">                &lt;mi&gt;n&lt;/mi&gt;
</html:span>            &lt;/munderover&gt;
</html:span><html:span class="element">            &lt;msub&gt;
<html:span class="element">                &lt;mi&gt;a&lt;/mi&gt;
</html:span><html:span class="element">                &lt;mi&gt;i&lt;/mi&gt;
</html:span>            &lt;/msub&gt;
</html:span>        &lt;/mrow&gt;
</html:span><html:span class="element">        &lt;mo&gt;+&lt;/mo&gt;
</html:span><html:span class="element">        &lt;mroot&gt;
<html:span class="element">            &lt;mrow&gt;
<html:span class="element">                &lt;msup&gt;
<html:span class="element">                    &lt;mi&gt;x&lt;/mi&gt;
</html:span><html:span class="element">                    &lt;mn&gt;2&lt;/mn&gt;
</html:span>                &lt;/msup&gt;
</html:span><html:span class="element">                &lt;mo&gt;+&lt;/mo&gt;
</html:span><html:span class="element">                &lt;mi&gt;b&lt;/mi&gt;
</html:span>            &lt;/mrow&gt;
</html:span><html:span class="element">            &lt;mi&gt;3&lt;/mi&gt;
</html:span>        &lt;/mroot&gt;
</html:span><html:span class="element">        &lt;mo&gt;+&lt;/mo&gt;
</html:span><html:span class="element">        &lt;mfenced&gt;
<html:span class="element">            &lt;mi&gt;a&lt;/mi&gt;
</html:span><html:span class="element">            &lt;mi&gt;b&lt;/mi&gt;
</html:span>        &lt;/mfenced&gt;
</html:span>    &lt;/mrow&gt;
</html:span>&lt;/math&gt;
</html:span></html:pre></html:div></vbox>
</vbox>
</div>

<p>Perhaps you want to see the attributes in the source view. Enter
<kbd>:set SourceView.showAttributes=yes&enter;</kbd> and voilà, here
they are. The source view has another useful feature: folding. When
you have a big equation, the source view spans below the window. You
can fix that by configuring the source view such that it only shows an
extract of the source. Enter <kbd>:set SourceView.foldingDepth=3&enter;</kbd>. 
Now the source view only shows
the elements three levels deep. Does an element at the third level contain children
they are replaced by <code>...</code>.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow internal:selected="parent">
        <munderover internal:selected="editcursor">
            <mo>∑</mo>
            <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
            <mi>n</mi>
        </munderover>
        <msub><mi>a</mi><mi>i</mi></msub>
    </mrow>
    <mo>+</mo>
    <mroot>
        <mrow>
            <msup>
                <mi>x</mi>
                <mn>2</mn>
            </msup>
            <mo>+</mo>
            <mi>b</mi>
        </mrow>
        <mi>3</mi>
    </mroot>
    <mo>+</mo>
    <mfenced open="&lt;" close="&gt;" separators=",">
        <mi>a</mi>
        <mi>b</mi>
    </mfenced>
</mrow> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="SourceView"><html:pre><html:span class="element"><html:span>&lt;math display="block" id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML"&gt;</html:span>
<html:span class="element">    <html:span>&lt;mrow&gt;</html:span>
<html:span class="element" internal:selected="parent">        <html:span>&lt;mrow&gt;</html:span>
<html:span class="element" internal:selected="editcursor">            <html:span>&lt;munderover&gt;</html:span>...&lt;/munderover&gt;
</html:span><html:span class="element">            <html:span>&lt;msub&gt;</html:span>...&lt;/msub&gt;
</html:span>        &lt;/mrow&gt;
</html:span><html:span class="element">        <html:span>&lt;mo&gt;</html:span>+&lt;/mo&gt;
</html:span><html:span class="element">        <html:span>&lt;mroot&gt;</html:span>
<html:span class="element">            <html:span>&lt;mrow&gt;</html:span>...&lt;/mrow&gt;
</html:span><html:span class="element">            <html:span>&lt;mi&gt;</html:span>3&lt;/mi&gt;
</html:span>        &lt;/mroot&gt;
</html:span><html:span class="element">        <html:span>&lt;mo&gt;</html:span>+&lt;/mo&gt;
</html:span><html:span class="element">        <html:span>&lt;mfenced close="&gt;" open="&lt;" separators=","&gt;</html:span>
<html:span class="element">            <html:span>&lt;mi -moz-math-font-style="italic"&gt;</html:span>a&lt;/mi&gt;
</html:span><html:span class="element">            <html:span>&lt;mi -moz-math-font-style="italic"&gt;</html:span>b&lt;/mi&gt;
</html:span>        &lt;/mfenced&gt;
</html:span>    &lt;/mrow&gt;
</html:span>&lt;/math&gt;
</html:span></html:pre></html:div></vbox>
</vbox>
</div>

<p>Unfortunately, there is no way to see the children of the
<code>munderover</code> anymore, even moving the cursor to one of its
children won't help. Here comes another option into play. Set it with 
<kbd>:set SourceView.foldingStart=-1&enter;</kbd>. This causes the
view to begin with the element that is the parent of the element under
the cursor. (Using <code>-2</code> as value, the view would begin at
the grandparent, for <code>-3</code> at the grandgrandparent and so
on.)</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow internal:selected="parent">
        <munderover internal:selected="editcursor">
            <mo>∑</mo>
            <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
            <mi>n</mi>
        </munderover>
        <msub><mi>a</mi><mi>i</mi></msub>
    </mrow>
    <mo>+</mo>
    <mroot>
        <mrow>
            <msup>
                <mi>x</mi>
                <mn>2</mn>
            </msup>
            <mo>+</mo>
            <mi>b</mi>
        </mrow>
        <mi>3</mi>
    </mroot>
    <mo>+</mo>
    <mfenced open="&lt;" close="&gt;" separators=",">
        <mi>a</mi>
        <mi>b</mi>
    </mfenced>
</mrow> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="SourceView"><html:pre><html:span class="element" internal:selected="parent">        <html:span>&lt;mrow&gt;</html:span>
<html:span class="element" internal:selected="editcursor">            <html:span>&lt;munderover&gt;</html:span>
<html:span class="element">                <html:span>&lt;mo&gt;</html:span>∑&lt;/mo&gt;
</html:span><html:span class="element">                <html:span>&lt;mrow&gt;</html:span>
<html:span class="element">                    <html:span>&lt;mi -moz-math-font-style="italic"&gt;</html:span>i&lt;/mi&gt;
</html:span><html:span class="element">                    <html:span>&lt;mo&gt;</html:span>=&lt;/mo&gt;
</html:span><html:span class="element">                    <html:span>&lt;mn&gt;</html:span>1&lt;/mn&gt;
</html:span>                &lt;/mrow&gt;
</html:span><html:span class="element">                <html:span>&lt;mi -moz-math-font-style="italic"&gt;</html:span>n&lt;/mi&gt;
</html:span>            &lt;/munderover&gt;
</html:span><html:span class="element">            <html:span>&lt;msub&gt;</html:span>
<html:span class="element">                <html:span>&lt;mi -moz-math-font-style="italic"&gt;</html:span>a&lt;/mi&gt;
</html:span><html:span class="element">                <html:span>&lt;mi -moz-math-font-style="italic"&gt;</html:span>i&lt;/mi&gt;
</html:span>            &lt;/msub&gt;
</html:span>        &lt;/mrow&gt;
</html:span></html:pre></html:div></vbox>
</vbox>
</div>

<p>Now, move the cursor and see what happens. Perhaps you also want to
do <kbd>:set SourceView.syntaxHighlighting=on&enter;</kbd>. Try
it and see the effect.</p>

<div class="documentationScreenshot">
<vbox style="width:100%">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><math id="equationTemplate" xmlns="http://www.w3.org/1998/Math/MathML" display="block">
<mrow>
    <mrow internal:selected="parent">
        <munderover internal:selected="editcursor">
            <mo>∑</mo>
            <mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow>
            <mi>n</mi>
        </munderover>
        <msub><mi>a</mi><mi>i</mi></msub>
    </mrow>
    <mo>+</mo>
    <mroot>
        <mrow>
            <msup>
                <mi>x</mi>
                <mn>2</mn>
            </msup>
            <mo>+</mo>
            <mi>b</mi>
        </mrow>
        <mi>3</mi>
    </mroot>
    <mo>+</mo>
    <mfenced open="&lt;" close="&gt;" separators=",">
        <mi>a</mi>
        <mi>b</mi>
    </mfenced>
</mrow> 
</math></html:div><html:div internal:function="viewport" internal:viewClass="SourceView"><html:pre><html:span class="element" internal:selected="parent">        <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="tagName">mrow</html:span><html:span class="syntax">&gt;</html:span></html:span>
<html:span class="element" internal:selected="editcursor">            <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="tagName">munderover</html:span><html:span class="syntax">&gt;</html:span></html:span>
<html:span class="element">                <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="tagName">mo</html:span><html:span class="syntax">&gt;</html:span></html:span><html:span class="contentText">∑</html:span><html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="syntax">/</html:span><html:span class="tagName">mo</html:span><html:span class="syntax">&gt;</html:span></html:span>
</html:span><html:span class="element">                <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="tagName">mrow</html:span><html:span class="syntax">&gt;</html:span></html:span>
<html:span class="element">                    <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="tagName">mi</html:span><html:span> <html:span class="attributeName">-moz-math-font-style</html:span><html:span class="syntax">=</html:span><html:span class="syntax">"</html:span><html:span class="attributeValue">italic</html:span><html:span class="syntax">"</html:span></html:span><html:span class="syntax">&gt;</html:span></html:span><html:span class="contentText">i</html:span><html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="syntax">/</html:span><html:span class="tagName">mi</html:span><html:span class="syntax">&gt;</html:span></html:span>
</html:span><html:span class="element">                    <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="tagName">mo</html:span><html:span class="syntax">&gt;</html:span></html:span><html:span class="contentText">=</html:span><html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="syntax">/</html:span><html:span class="tagName">mo</html:span><html:span class="syntax">&gt;</html:span></html:span>
</html:span><html:span class="element">                    <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="tagName">mn</html:span><html:span class="syntax">&gt;</html:span></html:span><html:span class="contentText">1</html:span><html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="syntax">/</html:span><html:span class="tagName">mn</html:span><html:span class="syntax">&gt;</html:span></html:span>
</html:span>                <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="syntax">/</html:span><html:span class="tagName">mrow</html:span><html:span class="syntax">&gt;</html:span></html:span>
</html:span><html:span class="element">                <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="tagName">mi</html:span><html:span> <html:span class="attributeName">-moz-math-font-style</html:span><html:span class="syntax">=</html:span><html:span class="syntax">"</html:span><html:span class="attributeValue">italic</html:span><html:span class="syntax">"</html:span></html:span><html:span class="syntax">&gt;</html:span></html:span><html:span class="contentText">n</html:span><html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="syntax">/</html:span><html:span class="tagName">mi</html:span><html:span class="syntax">&gt;</html:span></html:span>
</html:span>            <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="syntax">/</html:span><html:span class="tagName">munderover</html:span><html:span class="syntax">&gt;</html:span></html:span>
</html:span><html:span class="element">            <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="tagName">msub</html:span><html:span class="syntax">&gt;</html:span></html:span>
<html:span class="element">                <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="tagName">mi</html:span><html:span> <html:span class="attributeName">-moz-math-font-style</html:span><html:span class="syntax">=</html:span><html:span class="syntax">"</html:span><html:span class="attributeValue">italic</html:span><html:span class="syntax">"</html:span></html:span><html:span class="syntax">&gt;</html:span></html:span><html:span class="contentText">a</html:span><html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="syntax">/</html:span><html:span class="tagName">mi</html:span><html:span class="syntax">&gt;</html:span></html:span>
</html:span><html:span class="element">                <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="tagName">mi</html:span><html:span> <html:span class="attributeName">-moz-math-font-style</html:span><html:span class="syntax">=</html:span><html:span class="syntax">"</html:span><html:span class="attributeValue">italic</html:span><html:span class="syntax">"</html:span></html:span><html:span class="syntax">&gt;</html:span></html:span><html:span class="contentText">i</html:span><html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="syntax">/</html:span><html:span class="tagName">mi</html:span><html:span class="syntax">&gt;</html:span></html:span>
</html:span>            <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="syntax">/</html:span><html:span class="tagName">msub</html:span><html:span class="syntax">&gt;</html:span></html:span>
</html:span>        <html:span class="tag"><html:span class="syntax">&lt;</html:span><html:span class="syntax">/</html:span><html:span class="tagName">mrow</html:span><html:span class="syntax">&gt;</html:span></html:span>
</html:span></html:pre></html:div></vbox>
</vbox>
</div>

<p>Note that options that can be set either to <code>true</code> or
<code>false</code>, also allow the values <code>yes</code>,
<code>on</code>, <code>1</code> for
<code>true</code> and <code>no</code>, <code>off</code>,
<code>0</code> for <code>false</code>.</p>

<p>Of course, gemse has <a href="options.xhtml">many more options</a>.</p>

<h2 id="svg">Working with SVG</h2>

<p>You wonder why you find here a section about scalable vector
graphics? It is just here to show you that Gemse can load any element
of an XML document even if it is not the root element of a MathML or
OpenMath formula. However, in practice this is useless. (There is no
mode yet that lets you input SVG or arbitrary XML elements.)</p>

<p>Make shure that you are using the viewset
<code>presentation</code>. (If not, enter 
<kbd>:viewset presentation&enter;</kbd>.)</p>

<p>Let us load an SVG image. For this to work, we have to deactivate
the sanity check that makes shure that what you load is alway a
formula. You can do that by setting the option
<code>loadAnyAsRoot</code> to true, i.e. enter 
<kbd>:set loadAnyAsRoot=true</kbd>. Now you can load
the file <code>examples/vectorgraphics01.svg</code> as usual.</p>

<div class="documentationScreenshot">
<vbox flex="1"><html:div internal:function="viewport" internal:viewClass="DirectView"><svg width="12cm" height="4cm" viewBox="0 0 1200 400" xmlns="http://www.w3.org/2000/svg" version="1.1" internal:selected="parent">
   <defs>
     <style type="text/css"><![CDATA[
        @namespace internal "http://www.andonyar.com/rec/2008-12/gemse/internalns";
        *[internal|selected="editcursor"]                { fill: yellow; stroke: red;   }
        *[internal|selected="attributeCursor"]           { fill: black;  stroke: white; }
        *[internal|selected="parent"]                    { fill: #ddd;                  }
        *[internal|selected="userSelection"]             { fill: #7af;                  }
        *[internal|selected="userSelectionCursor"]       { fill: #66f;                  }
        *[internal|selected="attributeCursor selection"] { fill: #227;   stroke: white; }
        *[internal|selected="insertCursorIn"]            { fill: #dfd;                  }
        *[internal|selected="referenced"]                { fill: #faa;                  }
    ]]></style>
  </defs>
  <circle cx="600" cy="200" r="100" fill="gray" stroke="purple" stroke-width="10" internal:selected="editcursor"/>
  <polygon stroke="black" stroke-width="10" points="350,75 379,161 469,161 397,215 423,301 350,250 277,301 303,215 231,161 321,161"/>
  <polygon stroke="black" stroke-width="10" points="850,75 958,137.5 958,262.5 850,325 742,262.6 742,137.5"/>
</svg></html:div><html:div internal:function="viewport" internal:viewClass="TreeView"><html:div><html:div class="element" internal:selected="parent">svg<html:div class="element">defs<html:div class="element">style<html:div class="nodeValue">
        @namespace internal "http://www.andonyar.com/rec/2008-12/gemse/internalns";
        *[internal|selected="editcursor"]                { fill: yellow; stroke: red;   }
        *[internal|selected="attributeCursor"]           { fill: black;  stroke: white; }
        *[internal|selected="parent"]                    { fill: #ddd;                  }
        *[internal|selected="userSelection"]             { fill: #7af;                  }
        *[internal|selected="userSelectionCursor"]       { fill: #66f;                  }
        *[internal|selected="attributeCursor selection"] { fill: #227;   stroke: white; }
        *[internal|selected="insertCursorIn"]            { fill: #dfd;                  }
        *[internal|selected="referenced"]                { fill: #faa;                  }
    </html:div></html:div></html:div><html:div class="element" internal:selected="editcursor">circle</html:div><html:div class="element">polygon</html:div><html:div class="element">polygon</html:div></html:div></html:div></html:div></vbox>
</div>

<p>Now move the cursor around to see what happens to the figures.</p>

<p>(Note that this SVG image contains some CSS rules which make shure
that one can see the cursor in the image itself. If you wanted to work
with SVG in Gemse, you would better put them in Gemse's
<code>gemse.css</code>.)</p>

<h2 id="customizing">Customizing</h2>

<p>This section quickly gives you a hint how to customize some
internals of Gemse. Be aware that these things are internal and
therefore Gemse will break if you mess it up. You find the files
mentioned below in the subdirectory <code>chrome/content</code> of
the installation directory of Gemse. The command 
<kbd>:help installation-directory&enter;</kbd> helps you with locating
the installation directory (which can otherwise be a pain with Firefox
extensions on windows).</p>

<p>If you want to change the appearance of Gemse, you have to lay hands on
the file <code>gemse.css</code>. Note that the documentation also uses this
stylesheet file, so the examples in it are always consistent with your
changes.</p>

<p>For example, if you want to change the size of the renderings of
the formula, open gemse.css in a text editor, look out for
<code>*[internal|viewClass="DirectView"], *[internal|viewClass="EquationView"]</code>
and change the
<code>font-size</code> for example to <code>large</code>.</p>

<p>If you want to modify the pre-defined viewsets, you find them in the file
<code>editor.xul</code>.</p>

<p>If you do not like the keyboard layout, i.e. you want to change the
name of the commands, you have to look into the javascript file
for the table for the respective mode. For example, if you want to
change the commands of the attribute mode, open the file
<code>attributeMode_commandTable.js</code>. Those files are not
exactly self-explaining, but you can try to change them.</p>

<h2 id="how_to_go_on">How to go on?</h2>

<p>We reached the end of the tutorial. You should now read the
important <a href="base.xhtml">basic information</a>. Afterwards, you can peek
into the rest of the documentation.</p>

</body>

</html>
