<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html [
  <!ENTITY  enter  "↵">
  <!ENTITY  esc    "ESC">
  <!ENTITY  ctrl   "CRTL+">
  <!ENTITY  alt    "ALT+">
  <!ENTITY  space  "␣">
]>

<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:internal="http://www.andonyar.com/rec/2008-12/gemse/internalns"
    xmlns:m="http://www.w3.org/1998/Math/MathML"
    xml:lang="en"
    internal:function="documentation"
>

<head>
    <title>Gemse Tutorial</title>
    <link rel="stylesheet" href="../gemse.css" type="text/css" />
</head>

<body>

<h1>Gemse Tutorial</h1>

<p><em>I would be happy to hear from you if you have problems, so I can
improve this tutorial.</em></p>

<p>Gemse is inspired by the texteditor 
<a href="http://www.vim.org/">Vim</a>. It is difficult to learn, but
hopefully will be a powerful tool once it is finished. However, I am
sure you will master it, if you want to.</p>

<p>You wont need any knowledge about vim for this tutorial. But you
will need knowledge about presentation MathML. You can find tutorials
and the specification of MathML on the 
<a href="http://www.w3.org/Math/">MathML page of the w3c</a>. Note
that you do not need to care about content MathML, you only need basic
knowledge about the presentation markup of MathML. Of course learning
presentation MathML requires learning the fundamentals of XML. Gemse
directly edits the XML structure of presentation MathML.</p>

<h2>Starting Gemse</h2>

<p>Gemse 1 is an application written in Javascript using Mozilla. So,
if you have installed Firefox 3, you are already lucky. Otherwise I can
not help for the moment.</p>

<p>You can start Gemse by starting the demo on Gemse's website or by
downloading and extracting a Gemse release on your computer. In the
latter case, you have to open the file <code>editor.xhtml</code> in
Firefox. (I guess I do not need to mention that you have to turn on
JavaScript.)</p>

<p>There is an input box at the top. The cursor should be placed there
automatically. If not, do that manually, for example by clicking in
the box. Now you can start typing commands. As soon as you have
entered a complete command, it will be executed and the box will be
cleared. If you typed something wrong, the box can be cleared manually
by hitting the escape key. The first command you have to type is for
loading an equation we will use in this tutorial. Type <kbd>:load
doc/example01.xml</kbd> and hit enter. Now you should see something like shown below.</p>

<p>Maybe it does not work. In this case try to give the full URI of
the file <code>doc/example01.xml</code>. If you installed Gemse
locally the URI is <code>file://</code> followed by the full path of
the file. If you use the demo, this should be
<code>http://www.andonyar.com/rec/2008-12/gemse/approach1/demo/doc/example01.xml</code>.
If you installed Gemse in to the chrome, you must use
<code>chrome://gemse/content/doc/example01.xml</code>.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML" internal:selected="editcursor">
    <mrow>
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element" internal:selected="editcursor">math<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mo<div class="nodeValue">(</div></div><div class="element">mi<div class="nodeValue">x</div></div><div class="element">mo<div class="nodeValue">)</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div>
    <div internal:function="attributeView"><table><tr><td>http://www.w3.org/2000/xmlns/</td><td>xmlns</td><td>http://www.w3.org/1998/Math/MathML</td></tr></table></div>
    <div internal:function="modeName">edit</div>
    <pre internal:function="notificationDisplay"/>
</div>
</div>

<p>The first box contains the rendering of the current equation,
whereas the second box shows the MathML tree structure of it. After
the second box, you can see a table which shows the attributes of the
selected element. At the bottom, there is a status line which informs
you about the current state the editor is in. In the following
sections you will learn what all this means.</p>

<p>From now on, I will show you only those boxes that I think are
important.</p>

<h2>Moving around</h2>

<p>The most important thing is the cursor. It highlights an element of
the equation. If you issue a command, it gets applied on the
highlighted element. Currently, the cursor is at the <code>math</code>
element, the topmost element of the equation.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML" internal:selected="editcursor">
<mrow>
    <mrow>
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element" internal:selected="editcursor">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mo<div class="nodeValue">(</div></div><div class="element">mi<div class="nodeValue">x</div></div><div class="element">mo<div class="nodeValue">)</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p> You can move the cursor
around using the keys <kbd>h</kbd>, <kbd>j</kbd>, <kbd>k</kbd>,
<kbd>l</kbd>. (Well, I am actually writing what you have to enter. So
<kbd>J</kbd> means that you have to press the shift key and the key
with the letter J on it. When I write <kbd>j</kbd> you have to press
the key with the J on it, which enters a lower case j.) <kbd>h</kbd>
moves the cursor to the left, <kbd>l</kbd> moves it to the right. Of
course, the math element does not have an element to the right nor one
to the left. It has no siblings, if you want to express it in XML
terms. <kbd>k</kbd> moves the cursor to the parent of the currently
highlighted element. However, the <code>math</code> element is the
topmost element. Now press <kbd>j</kbd>.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML" internal:selected="parent">
<mrow internal:selected="editcursor">
    <mrow>
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element" internal:selected="parent">math<div class="element" internal:selected="editcursor">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mo<div class="nodeValue">(</div></div><div class="element">mi<div class="nodeValue">x</div></div><div class="element">mo<div class="nodeValue">)</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>It seems that nothing has changed. In order to see what happened,
look at the tree view in the box below the equation. Press
<kbd>j</kbd> again.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow internal:selected="parent">
    <mrow internal:selected="editcursor">
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element" internal:selected="parent">mrow<div class="element" internal:selected="editcursor">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mo<div class="nodeValue">(</div></div><div class="element">mi<div class="nodeValue">x</div></div><div class="element">mo<div class="nodeValue">)</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p><kbd>j</kbd> moves the cursor to the first child element. Now you
can press <kbd>l</kbd> to move the cursor to the next sibling. Now the
<code>mo</code> element with the <code>=</code> in it is higlighted.
<kbd>h</kbd> moves the cursor to the previous sibling, usually the
element to the left. Now use these command several times to get used
to it.</p>

<p>Observe that <kbd>h</kbd>, <kbd>l</kbd> do not always mean <q>to
the right</q> or <q>to the left</q> respectively. For example, select
the <code>mfrac</code> element. You can reach it my putting the cursor
over the <code>math</code> element by using <kbd>k</kbd> several times
followed by <kbd>jjlljl</kbd>. (Note that I sometimes join commands
that you have to enter together. This for example means that you have
to hit <kbd>j</kbd>, then <kbd>j</kbd>, then <kbd>l</kbd> and so on.)
Now hit <kbd>j</kbd> once again. This selects the first child of the
<code>mfrac</code> element.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac internal:selected="parent">
            <msup internal:selected="editcursor"><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mo<div class="nodeValue">(</div></div><div class="element">mi<div class="nodeValue">x</div></div><div class="element">mo<div class="nodeValue">)</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element" internal:selected="parent">mfrac<div class="element" internal:selected="editcursor">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>In MathML, the first child of an <code>mfrac</code> element is the
enumerator of the fraction. The second one is its denominator. So
enumerator and denominator are siblings in the XML tree. That means
that you have to use <kbd>h</kbd> and <kbd>l</kbd> to switch between
the two. <kbd>j</kbd> and <kbd>k</kbd> do have a different meaning in
this context: <kbd>k</kbd> moves to the parent, i.e. the
<code>mfrac</code> element. <kbd>j</kbd> moves to the first element
contained in the enumerator or denominator respectively. Try it. Also
try to find out what happens on the <code>msup</code> and
<code>munderover</code> elements.</p>

<p>Now you know how to move around. You also have seen that movements
are relative to the XML tree structure, not relative to where
something appears in the rendered equation. There are and will be many
more commands to move around faster, but what you have seen should
suffice for now.</p>

<h2>Deleting</h2>

<p>We start with the easy thing. Its deleting. (Who would have thought
that it is something destructive?) If you hit <kbd>x</kbd> the
element that is highlighted by the cursor gets removed, including all
its descendants. Move the cursor to the <code>(</code> after the
<code>exp</code> and hit <kbd>x</kbd>. What you get is</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow internal:selected="parent">
        <mi>exp</mi>
        
        <mi internal:selected="editcursor">x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element" internal:selected="parent">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element" internal:selected="editcursor">mi<div class="nodeValue">x</div></div><div class="element">mo<div class="nodeValue">)</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Do the same with the closing bracket <code>)</code> by
<kbd>lx</kbd>. Now you have</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow internal:selected="parent">
        <mi>exp</mi>
        
        <mi internal:selected="editcursor">x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element" internal:selected="parent">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element" internal:selected="editcursor">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Beware: <kbd>x</kbd> is dangerous. This may be configurable in a
future version of Gemse. Select the denominator of the fraction by
hitting <kbd>klljljl</kbd>. Now hit <kbd>x</kbd> to delete it. You
immediately see that this was not good.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac internal:selected="parent">
            <msup internal:selected="editcursor"><mi>x</mi><mi>k</mi></msup>
            
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mo<div class="nodeValue">(</div></div><div class="element">mi<div class="nodeValue">x</div></div><div class="element">mo<div class="nodeValue">)</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element" internal:selected="parent">mfrac<div class="element" internal:selected="editcursor">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>What does cause this? Well, some MathML elements must have a fixed
number of children, in case of <code>mfrac</code> this number is two.
If a <code>mfrac</code> element does not have two children, it is
invalid. The MathML renderer no longer understands what is meaned by
the <code>mfrac</code> element and can not render the equation
completely. If something like this happens, you have to look at the
tree view in order to fix the problem, since the rendering of the
equation is incomplete. You can also fix it by undoing your mistake,
as you will learn in the next section.</p>

<h2>Undo and redo</h2>

<p>Of course, Gemse has also undo and redo commands. <kbd>u</kbd>
undoes your last change. <kbd>&ctrl;r</kbd> undoes your last undo.
(<kbd>&ctrl;r</kbd> means that you have to hold down the control key
and hit r. Something like <kbd>&alt;ab&alt;c</kbd> says that you have to
hold control, hit a, releae control, hit b, hold down ALT, hit c and
releaste alt.) Now hit <kbd>u</kbd>. The denominator you just deleted
is back.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac internal:selected="parent">
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow internal:selected="editcursor"><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element" internal:selected="parent">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element" internal:selected="editcursor">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>You can not only undo the last change, you can even undo changes
before it. For this hit <kbd>uu</kbd>. Now the two brackets you
deleted are back too.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow internal:selected="parent">
        <mi>exp</mi>
        <mo internal:selected="editcursor">(</mo>
        <mi>x</mi>
        <mo>)</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element" internal:selected="parent">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element" internal:selected="editcursor">mo<div class="nodeValue">(</div></div><div class="element">mi<div class="nodeValue">x</div></div><div class="element">mo<div class="nodeValue">)</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>If you have undone too many changes, you can reapply them by
hitting <kbd>&ctrl;r</kbd>. Now, do that twice. The brackets are gone
again.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow internal:selected="parent">
    <mrow internal:selected="editcursor">
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element" internal:selected="parent">mrow<div class="element" internal:selected="editcursor">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Of course, you can undo again what you have redone, and so on.</p>

<p>Vim provides history information in form of a whole history tree.
Gemse only stores changes in a linear fashion. In vim, if you make
changes after an undo, the undone change gets remembered. Gemse
forgets all undone changes if you make new changes.</p>

<h2>Inserting</h2>

<p>Being destructive is fun, but being constructive is even more
fun.</p>

<p>Well, to insert something, you have to switch from the edit mode to
the insert mode. This can be done with various commands, depending
where you want to insert something. <kbd>a</kbd> (think: append)
calls the insert mode such that it inserts new elements behind the
current cursor. If you want to insert before it, you have to use
<kbd>i</kbd>. The insert mode also has a cursor quite like the edit
mode, but it looks different. Well, it doesn't only look different, it
has a further very important difference: It lies between two elements,
not on an element.</p>

<p>Position the cursor over the <code>munderover</code> element of the
sum sign, like this:</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="parent">
        <munderover internal:selected="editcursor">
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element" internal:selected="parent">mrow<div class="element" internal:selected="editcursor">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Now hit <kbd>i</kbd>. Do you see the cursor? It is right in front
of the sum sign, or more precicely, in front of the
<code>munderover</code> element.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="insertCursorIn">
        <munderover internal:selected="insertCursorBefore">
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            <mi>∞</mi>
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element" internal:selected="insertCursorIn">mrow<div class="element" internal:selected="insertCursorBefore">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">∞</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>However, for the moment we let it be. Press <kbd>&esc;</kbd>.
(Well, here you have to hit the escape key, not E then S then C and so
on.) This puts you right back into edit mode.</p>

<!-- Idea: change the infinite sum into a limes of partial sums. -->

<p>What is an infinite sum? Well, it is the limes of partial sums.
Now, let us write it as such. First, let us change the
<m:math><m:mi>∞</m:mi></m:math> to <m:math><m:mi>n</m:mi></m:math>. Hit
<kbd>jll</kbd>. Press <kbd>x</kbd> to remove the infinity sign, then
press <kbd>a</kbd> to open the insert mode. Remember that now, the
munderover is not valid, it has not enough children, but we will
immmediately add one.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover internal:selected="insertCursorIn">
            <mo>∑</mo>
            <mrow internal:selected="insertCursorAfter"><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        </munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element" internal:selected="insertCursorIn">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element" internal:selected="insertCursorAfter">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Press <kbd>in</kbd>. <kbd>i</kbd> tells the
insert mode that you want to insert an identifier that consists of one
sign. Then you enter the sign, which is n in this case. Now close the
insert mode with <kbd>&esc;</kbd>.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munderover internal:selected="parent">
            <mo>∑</mo>
            <mrow internal:selected="editcursor"><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element" internal:selected="parent">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element" internal:selected="editcursor">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Now press <kbd>k</kbd> in order to put the cursor on the
<code>munderover</code> element. Now we are going to insert the
limes. Press <kbd>i</kbd>.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="insertCursorIn">
        <munderover internal:selected="insertCursorBefore">
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element" internal:selected="insertCursorIn">mrow<div class="element" internal:selected="insertCursorBefore">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Well, the currently implemented insert mode is not intelligent. The
main problem is, that if you want to write
<m:math><m:msup><m:mi>a</m:mi><m:mn>2</m:mn></m:msup></m:math>, you have to tell it,
that you want to put the 2 into superposition before you enter the
a. But if you write down a formula on paper, you first think of the a.
(Well, the insert mode has a solution to this problem. You will see
that in a later section in this tutorial.)
Also, the insert mode does not find out whether a character denotes an
indentifier, operator or number, you always have to tell it.
Nonetheless, the insert mode has some nice features.</p>

<p>We want to insert an operator <m:math><m:mo>limes</m:mo></m:math> 
and under it we want to have the identifier 
<m:math><m:mi>n</m:mi></m:math>, the operator 
<m:math><m:mo>→</m:mo></m:math> and the identifier
<m:math><m:mi>∞</m:mi></m:math>.</p>

<p>If you make a mistake in the insert mode, you can hit
<kbd>&esc;</kbd> (maybe twice) to leave the insert mode and then use
<kbd>u</kbd> and try again.</p>

<p>To do that we need an <code>munder</code> element. Press
<kbd>u</kbd> to tell the insert mode that you want to have such an
element.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munder internal:selected="insertCursorIn"><mi internal:missing="1" internal:selected="insertCursorBefore">□</mi><mi internal:missing="1">□</mi></munder><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element" internal:selected="insertCursorIn">munder<div class="element" internal:selected="insertCursorBefore">mi<div class="nodeValue">□</div></div><div class="element">mi<div class="nodeValue">□</div></div></div><div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>You can see it already. When you now continue to insert elements,
they will replace the boxes you can see. Now press <kbd>O</kbd>. This
says that you are going to insert an operator. <kbd>o</kbd> means the
same thing, but only works for operators which consist of one
character. Now press <kbd>lim</kbd>. If you had used <kbd>o</kbd>
instead of <kbd>O</kbd>, the insert mode would have taken <q>l</q> as
the content of the operator. In our case however, the mode waits until
you press <kbd>ENTER</kbd>. Do that now.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munder internal:selected="insertCursorIn"><mi internal:selected="insertCursorAfter">lim</mi><mi internal:missing="1" internal:selected="insertCursorBefore">□</mi></munder><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element" internal:selected="insertCursorIn">munder<div class="element" internal:selected="insertCursorAfter">mi<div class="nodeValue">lim</div></div><div class="element" internal:selected="insertCursorBefore">mi<div class="nodeValue">□</div></div></div><div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Good. Since what we want to write below the limes consists of
multiple elements, we have to insert an <code>mrow</code> element. Do
that by hitting <kbd>&space;</kbd> (denoting the space bar).</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munder><mi>lim</mi><mrow internal:selected="insertCursorIn"><mi internal:missing="1" internal:selected="insertCursorBefore">□</mi></mrow></munder><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munder<div class="element">mi<div class="nodeValue">lim</div></div><div class="element" internal:selected="insertCursorIn">mrow<div class="element" internal:selected="insertCursorBefore">mi<div class="nodeValue">□</div></div></div></div><div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Now press <kbd>in</kbd>. Again, the i says that you insert an
identifier consisting of one character. Then press <kbd>o→</kbd> and
finally <kbd>i∞</kbd>.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munder><mi>lim</mi><mrow internal:selected="insertCursorIn"><mi>n</mi><mo>→</mo><mi internal:selected="insertCursorAfter">∞</mi></mrow></munder><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munder<div class="element">mi<div class="nodeValue">lim</div></div><div class="element" internal:selected="insertCursorIn">mrow<div class="element">mi<div class="nodeValue">n</div></div><div class="element">mo<div class="nodeValue">→</div></div><div class="element" internal:selected="insertCursorAfter">mi<div class="nodeValue">∞</div></div></div></div><div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Now hit <kbd>&esc;</kbd> and we are done.</p>

<h2>Saving your work</h2>

<p>I think we have done enough to get a break. I will now tell you how
to save your work, so you can continue later, without doing everything
again from the beginning.</p>

<p><em>Important:</em> <strong>Be careful!</strong> This software is
very young and the implementation of laoding and saving is rather a
hack. For example, it will overwrite existing files without moaning.
If you give the save or load commands a relative URI, then it is
considered to be relative to the current working directory, as
indicated by firefox. Also be aware, that if you are using gemse
directly from the web, for example if you are using the demo from
gemse's website, it has no permission to write to your harddisk. (You
can always use <kbd>:serialize&enter;</kbd> to get the XML code of the
equation.)</p>

<p>For saving you simply write <kbd>:save&space;</kbd>, followed by the
URI where you want to save your equation, followed by
<kbd>&enter;</kbd>. The URI may be a relative one, which then is
interpreted as reltive to the current working directory. If the
URI points to a remote resource on a HTTP server, Gemse tries to save
the file using the PUT method. However, if the URI points to a local
file, Gemse will use the filesystem to save it.</p>

<p>So you can write <kbd>:save example.xml&enter;</kbd> to save the equation
as an XML file in your current working directory. Or use something like
<kbd>:save file:///home/urs/math/example.xml&enter;</kbd> to give an
absolute path. Depending on your operating system, this looks a little
bit different.</p>

<p>If you have loaded the equation from a file, Gemse remembers that.
In such a case you can use <kbd>:save&enter;</kbd> to write it back
into this file.</p>

<p><kbd>:load</kbd> folowed by an URI loads a file. This must be an
XML file containing a <code>math</code> element as root element.
However, you can also load equations contained in XHTML or OMDoc
files. One option is to use <kbd>:loadid</kbd> followed by an URI and
an id. Like this, gemse will load the resource and extract the element
with the given id. When you save later on, the equation will be put
back into the document and the document will be saved. If the element
you want to load has no id, you can use an xpath expression instead,
with the command <kbd>:loadxpath</kbd>. The most crazy load command is
<kbd>:loadalla</kbd> followed by a URI. It will load all equation it
can find in the given document.</p>

<p>Please be aware, that every of the load commands load the document
into memory, not only the equation. Later, when you save your
equation, the whole document from memory gets written.
So if you load one equation out of
a large document, and the document gets changed somewhere else, this
changes will get lost when you save your work later on.</p>

<h2>More fun with the insert mode</h2>

<p>Let us construct the following formula:</p>

<math xmlns="http://www.w3.org/1998/Math/MathML" display="block"> <mrow><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo>=</mo><msqrt><msup><mrow><mo>(</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo>)</mo></mrow><mn>2</mn></msup></msqrt><mo>=</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow></mrow></math>

<p>Nothing easier than that. First, create a new equation with
<kbd>:new&enter;</kbd>. Your other equation is still here, with
<kbd>:previous&enter;</kbd> and <kbd>:next&enter;</kbd> you can switch
between the two. (And <kbd>:close&enter;</kbd> or
<kbd>:close!&enter;</kbd> gets rid of one.) Here, I show you only the new one.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="editcursor">
            <mrow/>
        </math>
    </div>
    <div internal:function="treeView"><div><div class="element" internal:selected="editcursor">math<div class="element">mrow</div></div></div></div>
</div>
</div>

<p>The newly created equation is a <code>math</code> element
containing an mrow element. Move the cursor to the mrow element.
Unfortunately, we can not use <kbd>i</kbd> nor <kbd>a</kbd>, since
they would insert before or after the <code>mrow</code> element. We want to insert
<em>in</em> the <code>mrow</code>. To do this, there is the command
<kbd>&ctrl;i</kbd>, which you now perform.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
            <mrow internal:selected="insertCursorIn"/>
        </math>
    </div>
    <div internal:function="treeView"><div><div class="element" internal:selected="parent">math<div class="element" internal:selected="insertCursorIn">mrow</div></div></div></div>
</div>
</div>

<p>Press <kbd>r</kbd>. This creates a squareroot. (<kbd>R</kbd> would
give you a general root.) Now type <kbd>^ian2&space;&enter;</kbd>.
(The &space; should be optional, but if you are going to hit <kbd>&enter;</kbd>, it
is required because of a bug.) Then <kbd>o+&space;</kbd>. Here, the spacebar
creates an <code>mrow</code> element. Go on with
<kbd>n2iaib&enter;</kbd>, <kbd>o+^ibn2&space;&enter;&enter;</kbd>,
<kbd>o=</kbd>.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
            <mrow internal:selected="insertCursorIn"><msqrt internal:selected="insertCursorAfter"><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt></mrow>
        </math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element" internal:selected="insertCursorIn">mrow<div class="element" internal:selected="insertCursorAfter">msqrt<div class="element">msup<div class="element">mi<div class="nodeValue">a</div></div><div class="element">mn<div class="nodeValue">2</div></div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">mrow<div class="element">mn<div class="nodeValue">2</div></div><div class="element">mi<div class="nodeValue">a</div></div><div class="element">mi<div class="nodeValue">b</div></div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">msup<div class="element">mi<div class="nodeValue">b</div></div><div class="element">mn<div class="nodeValue">2</div></div></div></div></div></div></div></div>
</div>
</div>

<p>And now <kbd>ro(&space;iao+ib&enter;o)</kbd>.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
            <mrow><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo>=</mo><msqrt internal:selected="insertCursorIn"><mo>(</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo internal:selected="insertCursorAfter">)</mo></msqrt></mrow>
        </math>
    </div>
    <div internal:function="treeView"><div><div class="element" internal:selected="parent">math<div class="element">mrow<div class="element">msqrt<div class="element">msup<div class="element">mi<div class="nodeValue">a</div></div><div class="element">mn<div class="nodeValue">2</div></div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">mrow<div class="element">mn<div class="nodeValue">2</div></div><div class="element">mi<div class="nodeValue">a</div></div><div class="element">mi<div class="nodeValue">b</div></div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">msup<div class="element">mi<div class="nodeValue">b</div></div><div class="element">mn<div class="nodeValue">2</div></div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element" internal:selected="insertCursorIn">msqrt<div class="element">mo<div class="nodeValue">(</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">a</div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">mi<div class="nodeValue">b</div></div></div><div class="element" internal:selected="insertCursorAfter">mo<div class="nodeValue">)</div></div></div></div></div></div></div>
</div>
</div>

<p> Rats! We have
forgotten something important. The expression inside the brackets
including the brackets actually should be the base of a potency.
Actually, we should have hit <kbd>^&space;</kbd> right before the
<kbd>o(</kbd>. This mistake happens regularly (at least to me).
Usually, one thinks of the potency after having written the base.
Unfortunately, the current insert mode does not work like that, it
needs you to enter the <kbd>^</kbd> before writing the base. However,
there is a feature that allows you to fix this situation. Find out
yourself what the commands <kbd>h</kbd> and <kbd>l</kbd> do. Well,
they select what you already wrote. Good. use these two commands to
select the brackets and their content:</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
            <mrow><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo>=</mo><msqrt internal:selected="insertCursorIn"><mo internal:selected="userSelection">(</mo><mrow internal:selected="userSelection"><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo internal:selected="userSelection">)</mo></msqrt></mrow>
        </math>
    </div>
    <div internal:function="treeView"><div><div class="element" internal:selected="parent">math<div class="element">mrow<div class="element">msqrt<div class="element">msup<div class="element">mi<div class="nodeValue">a</div></div><div class="element">mn<div class="nodeValue">2</div></div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">mrow<div class="element">mn<div class="nodeValue">2</div></div><div class="element">mi<div class="nodeValue">a</div></div><div class="element">mi<div class="nodeValue">b</div></div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">msup<div class="element">mi<div class="nodeValue">b</div></div><div class="element">mn<div class="nodeValue">2</div></div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element" internal:selected="insertCursorIn">msqrt<div class="element" internal:selected="userSelection">mo<div class="nodeValue">(</div></div><div class="element" internal:selected="userSelection">mrow<div class="element">mi<div class="nodeValue">a</div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">mi<div class="nodeValue">b</div></div></div><div class="element" internal:selected="userSelection">mo<div class="nodeValue">)</div></div></div></div></div></div></div>
</div>
</div>

<p>Now, hit <kbd>^</kbd>. The selected elements are enclosed inside an
<code>mrow</code> which becomes the first element of the new
<code>msup</code> element.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block" internal:selected="parent">
            <mrow><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo>=</mo><msqrt><msup internal:selected="insertCursorIn"><mrow internal:selected="insertCursorAfter"><mo>(</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo>)</mo></mrow><mi internal:missing="1" internal:selected="insertCursorBefore">□</mi></msup></msqrt></mrow>
        </math>
    </div>
    <div internal:function="treeView"><div><div class="element" internal:selected="parent">math<div class="element">mrow<div class="element">msqrt<div class="element">msup<div class="element">mi<div class="nodeValue">a</div></div><div class="element">mn<div class="nodeValue">2</div></div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">mrow<div class="element">mn<div class="nodeValue">2</div></div><div class="element">mi<div class="nodeValue">a</div></div><div class="element">mi<div class="nodeValue">b</div></div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">msup<div class="element">mi<div class="nodeValue">b</div></div><div class="element">mn<div class="nodeValue">2</div></div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">msqrt<div class="element" internal:selected="insertCursorIn">msup<div class="element" internal:selected="insertCursorAfter">mrow<div class="element">mo<div class="nodeValue">(</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">a</div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">mi<div class="nodeValue">b</div></div></div><div class="element">mo<div class="nodeValue">)</div></div></div><div class="element" internal:selected="insertCursorBefore">mi<div class="nodeValue">□</div></div></div></div></div></div></div></div>
</div>
</div>

<p>Now, we put the exponent <kbd>n2&space;</kbd> and continue with our
work: <kbd>&enter;&enter;o=</kbd>.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
            <mrow internal:selected="insertCursorIn"><msqrt><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><mrow><mn>2</mn><mi>a</mi><mi>b</mi></mrow><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup></msqrt><mo>=</mo><msqrt><msup><mrow><mo>(</mo><mrow><mi>a</mi><mo>+</mo><mi>b</mi></mrow><mo>)</mo></mrow><mn>2</mn></msup></msqrt><mo internal:selected="insertCursorAfter">=</mo></mrow>
        </math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element" internal:selected="insertCursorIn">mrow<div class="element">msqrt<div class="element">msup<div class="element">mi<div class="nodeValue">a</div></div><div class="element">mn<div class="nodeValue">2</div></div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">mrow<div class="element">mn<div class="nodeValue">2</div></div><div class="element">mi<div class="nodeValue">a</div></div><div class="element">mi<div class="nodeValue">b</div></div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">msup<div class="element">mi<div class="nodeValue">b</div></div><div class="element">mn<div class="nodeValue">2</div></div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">msqrt<div class="element">msup<div class="element">mrow<div class="element">mo<div class="nodeValue">(</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">a</div></div><div class="element">mo<div class="nodeValue">+</div></div><div class="element">mi<div class="nodeValue">b</div></div></div><div class="element">mo<div class="nodeValue">)</div></div></div><div class="element">mn<div class="nodeValue">2</div></div></div></div><div class="element" internal:selected="insertCursorAfter">mo<div class="nodeValue">=</div></div></div></div></div></div>
</div>
</div>

<p>To finish the whole thing, press <kbd>&space;o(&space;iao+ib&enter;o)&enter;&enter;</kbd>.
Actually, the last hit of the enter key terminates the insert mode,
you also could have used <kbd>&esc;</kbd> instead.</p>

<p>Done. Note that at certain places, we could have skipped the
insertion of an mrow. As you will see in the next section, such
optional mrows can be added easely later on in edit mode.</p>

<p>You can now close this equation. Since you do not have saved your
changes, <kbd>:close&enter;</kbd> will not work. Instead, use
<kbd>:close!&enter;</kbd>, which will throw away all unsaved
changes.</p>

<h2>The visual mode</h2>

<p>Sometimes you want to do something not only with the element the
cursor is on, but with a whole sequence of elements. Using the visual
mode (name inspired by vim), you can select a set of siblings.</p>

<p>Put the cursor on the <code>munderover</code> element of the sum
sign. We are going to put the <code>munderover</code> element and the
following <code>mfrac</code> element into an mrow element. This makes
sense, since they together form the argument of the lim operator.</p>

<p>Press <kbd>v</kbd>. This throws you directly into visual mode.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="parent">
        <munder><mi>lim</mi><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow></munder><munderover internal:selected="userSelectionCursor">
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element" internal:selected="parent">mrow<div class="element">munder<div class="element">mi<div class="nodeValue">lim</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">n</div></div><div class="element">mo<div class="nodeValue">→</div></div><div class="element">mi<div class="nodeValue">∞</div></div></div></div><div class="element" internal:selected="userSelectionCursor">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
    <div internal:function="modeName">visual</div>
</div>
</div>

<p>If you use the default skin, you now see a beautiful blue. You can
now use <kbd>l</kbd>, <kbd>h</kbd> and <kbd>o</kbd>. Find out yourself
what they do. Be careful not to hit any other key. Now select the sum
and the fraction.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="parent">
        <munder><mi>lim</mi><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow></munder><munderover internal:selected="userSelection">
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover>
        <mfrac internal:selected="userSelectionCursor">
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element" internal:selected="parent">mrow<div class="element">munder<div class="element">mi<div class="nodeValue">lim</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">n</div></div><div class="element">mo<div class="nodeValue">→</div></div><div class="element">mi<div class="nodeValue">∞</div></div></div></div><div class="element" internal:selected="userSelection">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element" internal:selected="userSelectionCursor">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Now you can hit a command from the editMode. In this case, execute
the command <kbd>&space;</kbd> (i.e. hit the space bar). This
command puts an <code>mrow</code> element around the selected
elements.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow internal:selected="parent">
        <munder><mi>lim</mi><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow></munder>
        <mrow internal:selected="editcursor"><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover><mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac></mrow>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element" internal:selected="parent">mrow<div class="element">munder<div class="element">mi<div class="nodeValue">lim</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">n</div></div><div class="element">mo<div class="nodeValue">→</div></div><div class="element">mi<div class="nodeValue">∞</div></div></div></div><div class="element" internal:selected="editcursor">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>You are back in the edit mode. In the tree view you can see the
new mrow element. The cursor is currently on it.</p>

<h2>Copying and Pasting</h2>

<p>Since you now know how the visual mode works, copying is no more
difficult. Gemse uses the command <kbd>y</kbd> for copying the
(with visual mode) selected elements into a register. A register is
simply a place where copied elements are stored. If you use a command
that works on a register and you do not say on which one, it will use
the default register. Except the default register, every register
has a name consisting of exactly one character. (Unlike in vim, you
can use every unicode character as name. This extends the amount of
available registers far beyond 26. Gemse's register names are case
sensitive, for example, register A and a are distinct registers.) By
prefixing a command with <kbd>"</kbd> followed by the name of the
register, you can tell it to use that register. Let's try it:</p>

<p>Place the cursor on the equal sign and press <kbd>v</kbd> to start
the visual mode. Select the equal sign and the term on its right, like
this:</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow internal:selected="parent">
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo internal:selected="userSelection">=</mo>
    <mrow internal:selected="userSelectionCursor">
        <munder><mi>lim</mi><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow></munder>
        <mrow><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover><mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac></mrow>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element" internal:selected="parent">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element" internal:selected="userSelection">mo<div class="nodeValue">=</div></div><div class="element" internal:selected="userSelectionCursor">mrow<div class="element">munder<div class="element">mi<div class="nodeValue">lim</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">n</div></div><div class="element">mo<div class="nodeValue">→</div></div><div class="element">mi<div class="nodeValue">∞</div></div></div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Now hit <kbd>y</kbd>. Now, a copy of those two elements is in the
default register. Now select the term on the left and the equal sign
and press <kbd>"ay</kbd>. This puts those two elements into the register
a. <em>Beware:</em> In visual mode, if you start to enter a command that is
longer than one character (for example <kbd>"ay</kbd>) it seems as if
the selection is lost (i.e. the visual mode disappears too soon), but
it is not. Indeed, if you finish to enter the command, the selection
will be applied. This is a problem that will hopefully be removed in
future versions.</p>

<p>Ok, now we want to know! Move the cursor to the right end 
for example by pressing <kbd>$</kbd>. The command <kbd>p</kbd> puts
the content of the default register after the cursor. Try it.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow internal:selected="parent">
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munder><mi>lim</mi><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow></munder>
        <mrow><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover><mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac></mrow>
    </mrow>
<mo>=</mo><mrow internal:selected="editcursor">
        <munder><mi>lim</mi><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow></munder>
        <mrow><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover><mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac></mrow>
    </mrow></mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element" internal:selected="parent">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munder<div class="element">mi<div class="nodeValue">lim</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">n</div></div><div class="element">mo<div class="nodeValue">→</div></div><div class="element">mi<div class="nodeValue">∞</div></div></div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element" internal:selected="editcursor">mrow<div class="element">munder<div class="element">mi<div class="nodeValue">lim</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">n</div></div><div class="element">mo<div class="nodeValue">→</div></div><div class="element">mi<div class="nodeValue">∞</div></div></div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div></div>
</div>
</div>

<p>Now put the cursor at the beginning, using for example
<kbd>0</kbd>. The command <kbd>"aP</kbd> puts the content of the
register a before the cursor. So this yields</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow internal:selected="parent">
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow><mo internal:selected="editcursor">=</mo><mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munder><mi>lim</mi><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow></munder>
        <mrow><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover><mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac></mrow>
    </mrow>
<mo>=</mo><mrow>
        <munder><mi>lim</mi><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow></munder>
        <mrow><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover><mfrac>
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac></mrow>
    </mrow></mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element" internal:selected="parent">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element" internal:selected="editcursor">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munder<div class="element">mi<div class="nodeValue">lim</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">n</div></div><div class="element">mo<div class="nodeValue">→</div></div><div class="element">mi<div class="nodeValue">∞</div></div></div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munder<div class="element">mi<div class="nodeValue">lim</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">n</div></div><div class="element">mo<div class="nodeValue">→</div></div><div class="element">mi<div class="nodeValue">∞</div></div></div></div><div class="element">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div></div>
</div>
</div>

<p><kbd>uu</kbd> cleans up the mess we created. Like
<kbd>&ctrl;i</kbd> there is also <kbd>&ctrl;p</kbd> which puts the
content of a register into an empty element.</p>

<h2>The attribute mode</h2>

<p>In MathML, one can put various attributes on elements. They control
their semantically significant appeareance. It is also possible to put
attributes of a foreign namespace on them. One useful example for this
are attributes from XLink, which allow you to make links out of MathML
elements.</p>

<p>In edit mode, you can call the attribute mode which allows you to
edit the attributes of this element. At the moment, the attribute mode
is called with <kbd>@</kbd>. This may change in the future, since in
vim, <kbd>@</kbd> has another meaning, which could be important for
gemse too.</p>

<p>Select the fraction, i.e. the <code>mfrac</code> element. Now hit
<kbd>@</kbd>. You are now in the attribute mode. The selected element
does not yet have any attributes declared. However, the attribute view
below the tree view does also show you the default values of all
attributes. If an attribute is not declared, MathML uses its default
value. Let us add the attribute <code>bevelled</code>. For this, write
<kbd>ibevelled&enter;true&enter;</kbd>. Note that the <code>i</code>
at the beginning tells the attribute mode that you want to insert a
new attribute. Behind the i you have to write the name of the
attribute, then hit enter followed by the value of the attribute and
then enter again. As you can see, the attribute has been added to the
list of attributes and indeed, the fraction changed its
appeareance.</p>

<div class="documentationScreenshot">
<div internal:function="container" internal:selected="equationFocus">
    <div internal:function="equation">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
<mrow>
    <mrow>
        <mi>exp</mi>
        
        <mi>x</mi>
        
    </mrow>
    <mo>=</mo>
    <mrow>
        <munder><mi>lim</mi><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow></munder>
        <mrow internal:selected="parent"><munderover>
            <mo>∑</mo>
            <mrow><mi>k</mi><mo>=</mo><mi>0</mi></mrow>
            
        <mi>n</mi></munderover><mfrac internal:selected="editcursor" internal:selectedAttributes="" internal:attributeCursor="bevelled" bevelled="true">
            <msup><mi>x</mi><mi>k</mi></msup>
            <mrow><mi>k</mi><mo>!</mo></mrow>
        </mfrac></mrow>
    </mrow>
</mrow>
</math>
    </div>
    <div internal:function="treeView"><div><div class="element">math<div class="element">mrow<div class="element">mrow<div class="element">mi<div class="nodeValue">exp</div></div><div class="element">mi<div class="nodeValue">x</div></div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mrow<div class="element">munder<div class="element">mi<div class="nodeValue">lim</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">n</div></div><div class="element">mo<div class="nodeValue">→</div></div><div class="element">mi<div class="nodeValue">∞</div></div></div></div><div class="element" internal:selected="parent">mrow<div class="element">munderover<div class="element">mo<div class="nodeValue">∑</div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">=</div></div><div class="element">mi<div class="nodeValue">0</div></div></div><div class="element">mi<div class="nodeValue">n</div></div></div><div class="element" internal:selected="editcursor">mfrac<div class="element">msup<div class="element">mi<div class="nodeValue">x</div></div><div class="element">mi<div class="nodeValue">k</div></div></div><div class="element">mrow<div class="element">mi<div class="nodeValue">k</div></div><div class="element">mo<div class="nodeValue">!</div></div></div></div></div></div></div></div></div></div>
    <div internal:function="attributeView"><table><caption>attributes</caption><tr internal:selected="attributeCursor"><td></td><td>bevelled</td><td>true</td></tr></table><table class="defaultAttribute"><caption>default attributes</caption><tr><td></td><td>linethickness</td><td>1</td></tr><tr><td></td><td>numalign</td><td>center</td></tr><tr><td></td><td>denomalign</td><td>center</td></tr><tr><td></td><td>bevelled</td><td>false</td></tr></table></div>
    <div internal:function="modeName">attribute</div>
    <pre internal:function="notificationDisplay"/>
</div>
</div>

<p>Let us add another attribute:
<kbd>ilinethickness&enter;0&enter;</kbd>. And antother one:
<kbd>ifoo&enter;bar&enter;</kbd>.</p>

<p>By looking at the attributes table you can see that there 
is also a cursor in the attribute mode.
You can move it with <kbd>j</kbd> and <kbd>k</kbd>. Select the
<code>bevelled</code> attribute and insert <kbd>cfalse&enter;</kbd>.
This changes the value of the attribute under the cursor. You can also
remove the attribute by hitting <kbd>x</kbd>.</p>

<h2>Customizing</h2>

<p>If you want to change the appreance of Gemse, you have to lay hands on
the file <code>gemse.css</code>. Note that the documentation also uses this
stylesheet file, so the examples in it are always consistent with your
changes.</p>

<p>For example, if you want to change the size of the renderings of
the formula, open gemse.css in a text editor, look out for
<code>*[internal|function="equation"]</code> and change the
<code>font-size</code> for example to <code>large</code>.</p>

<p>If you do not like the keyboard layout, i.e. you want to change the
name of the commands, you have to look into the javascript file
for the table for the respective mode. For example, if you want to
change the commands of the attribute mode, open the file
<code>attributeMode_commandTable.js</code>. Those files are not
exactly self-explaining, but you can try to change it.</p>

<h2>How to go on?</h2>

<p>We reached the end of the tutorial. Now you perhaps want to read in
the rest of the documentation.</p>

</body>

</html>
